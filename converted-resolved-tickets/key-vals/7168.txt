zendeskTicketNumber: 7168
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/7168
title: New Slack message in support-mercari1
Application engineer: Mariam Adedeji
Customer: Mercari 
Date: Mar 24
Version: 3.37.0â€‹
Deployment: kubernetes
External Services: GITHUB
Auth Providers: openidconnect
Slack Links: https://sourcegraph.slack.com/archives/C018U1ZRFQC/p1648193971962729
GitHub Issue Link:
Doc Update Link:
Summary: I'm having some trouble with using the migrator to perform database migrations before upgrading to the latest version. It seems as though it does not honor the DISABLE_CODE_INSIGHTS environment variable so it always tries to connect even if this is unavailable.
it has been noted here that the default -db=all behavior applies to all three databases. So the operation will fail even if the configuration flag DISABLE_CODE_INSIGHTS is set. To work around this, explicitly supply database(s) via the -db flag (e.g., -db=frontend,codeintel)
\[Link\](https://docs.sourcegraph.com/admin/how-to/manual_database_migrations
