zendeskTicketNumber: 8920
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/8920
title: # Re: GitHub OAuth / Server restart
Application engineer: Alex Jean-Baptiste
Customer: Aurora 
Date: June 13, 2022
Version: ​3.41.0
Deployment: Docker Compose
External Services: GitHub
Auth Providers: builtin, openidconnect, saml, github
Slack Links: N/A
GitHub Issue Link: https://github.com/sourcegraph/customer/issues/1076
Doc Update Link: N/A ​
Summary: ​The customer experiences a lack of repository permissions enforcement. GitHub SSO for GitHub organizations is not enforced when using GitHub as an auth provider. ​ The customer is allowed to access repos from GitHub without clicking "Authorize" when signing into Sourcegraph with GitHub. ​
​​Add GitHub as an auth provider Make sure the GitHub instance is using SSO to restrict GitHub organization access Log into Sourcegraph with GitHub on a non-soucegraph-admin and do not authorize access to the "Aurora" organization (an organization that you know Sourcegraph has repos from loaded into it) and simply press continue Attempt the following search repo:\
​No current known resolution. The customer will use Okta as an auth provider until repository permissions reworking potentially addresses this issue. ​
https://docs.sourcegraph.com/admin/repo/permissions
​https://docs.github.com/en/enterprise-cloud@latest/authentication/authenticating-with-saml-single-sign-on/viewing-and-managing-your-active-saml-sessions ​ https://docs.sourcegraph.com/admin/auth
​https://docs.github.com/en/organizations/restricting-access-to-your-organizations-data/approving-oauth-apps-for-your-organization ​ ​
