zendeskTicketNumber: 8347
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/8347
title: nutanix - off hours upgrade support
Application engineer: Warren Gifford
Customer: Nutanix, Inc. 
Date: May 19, 2022
Version: 3.34.2​
Deployment: kubernetes
External Services: GITHUB,OTHER
Auth Providers: builtin,saml
Slack Links:
GitHub Issue Link:
Doc Update Link:
Summary: Customers streaming search on an unindexed branch of a monorepo had poor symbols sidebar performance, as well as failing standard searches in this branch.
Just summarizing some quick retro on this for engineering visability --Quick Summary: There are two separate issues here -- Standard search allowed users to navigate to a file blob on a repo branch, but when the search button was pressed no results would be returned. Symbols sidebar still processing error message
Resolution It's unclear wether exactly why this was resolved, but, its likely that improvements in search as a result of upgrades explain resolution here. After upgrading, at the time of enabling Rockskip we observed that the Poseidon branch was being indexed. It seems likely that this completed and this explains resolution of the UI search issue. Especially because the these were file: searches which are not resolved by symbols Rockskip worked great to resolve the symbols sidebar issues after implemented and configured for Nutanix's larger repos.
Great job solving this issue across timezones and teams ya'll :value-work-as-a-team:Retro Discussion Having the ability to determine what service is resolving searches without using a trace or digging into the network dev tools would be great here. For instance is my symbols sidebar resolving by. use of rockskip or standard symbols. Did my search use a zoekt index to resolve? or Symbols? Having immediate signal in the UI around this would help to quickly identify the struggling service, when a search returns in an error or inaccurate results.As a side note improving the ease of getting a trace from a failing search via the UI or src debug would be great :thumbsup::skin-tone-3: -- a similar tracking issue by frontend-platform https://github.com/sourcegraph/sourcegraph/issues/26570cc: @keegan @Chris Wendt @Eugenia Fernandez @Taylor Sperry
