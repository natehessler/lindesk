zendeskTicketNumber: 5862
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/5862
title: batch change search / on field / repositoriesMatchingQuery field / query intersection / combination of search terms
Application engineer: Kelvin Lee
Customer: Indeed 
Date: Jan 27
Version: 3.33.2​
Deployment: kubernetes
External Services: GITLAB
Auth Providers: saml
Slack Links: [Slack](https://sourcegraph.slack.com/archives/C01EDKVG9J5/p1643324770017800) , secondary internal ask for help [here](https://sourcegraph.slack.com/archives/C01JR51JR5J/p1643408309249359)
GitHub Issue Link: None
Doc Update Link: None
Summary: Can one get the intersection of certain repo filters to work as a search query in batch changes?
Yes! For a couple of reasons:
(1) Confidence that batch changes search syntax is powered by queries: https://docs.sourcegraph.com/batch_changes/references/troubleshooting Quoted below: \> You can do so by changing the on.repositoriesMatchingQuery to yield less results or by using a concrete list of repositories with on.repository. \> For the former \[on.repositoriesMatchingQuery\] you can use Sourcegraph's search filters.
(2) search syntax allows intersection/ boolean operators/ 
Example: 
Tested using src batch preview on my own machine, connecting to cse-k8s.sgdev.org in the src cli.
Customer followed up with questions about: (a) 
(A) No, we don't have any built in src commands that clean up the docker containers after a SIGKILL, unfortunately.
(B) 
https://docs.sourcegraph.com/batch_changes/references/troubleshooting https://docs.sourcegraph.com/code_search/reference/queries
