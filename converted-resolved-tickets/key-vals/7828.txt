zendeskTicketNumber: 7828
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/7828
title: Questions on the Usage of Kustomize
Application engineer: Michael Bali
Customer: Allegro 
Date: Apr 25
Version: â€‹3.38.0
Deployment: kubernetes
External Services: GITHUB
Auth Providers: builtin,github
Slack Links: https://sourcegraph.slack.com/archives/C02BF1E7VAN/p1650886295886509
GitHub Issue Link: N/A
Doc Update Link: N/A
Summary: -   The User wants to know if it's possible to use the overlays provided in the subdirectories of deploy-sourcegraph/overlays with their own created overlays for a different purpose.
-   don't see an way to use namespace, storage, custom overlay at the same time? Every time that I run overlay-generate-cluster it rewrites everything
-   Yes you can use the overlays provided in the subdirectories of 
-   Within the 
    apiVersion: kustomize.config.k8s.io/v1beta1
    kind: Kustomization
    namespace: sourcegraph
    resources:
      - ../bases/deployments
      - ../bases/rbac-roles
      - ../bases/pvcs
    patchesStrategicMerge:
      - ../namespaced/prometheus/prometheus.ClusterRoleBinding.yaml
      - ../namespaced/prometheus/prometheus.ConfigMap.yaml
      - ../namespaced/cadvisor/cadvisor.ClusterRoleBinding.yaml
    transformers:
      - metadataLabelTransformer.yaml
