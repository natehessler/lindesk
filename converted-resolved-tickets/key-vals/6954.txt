zendeskTicketNumber: 6954
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/6954
title: New Slack message in support-dropbox cloning in progress``{=html}
Application engineer: Quinlan Sparks
Customer: Dropbox 
Date: Mar 17
Version: 3.36.2
Deployment: docker-compose
External Services: GITHUB,OTHER
Auth Providers: saml
Slack Links: https://sourcegraph.slack.com/archives/C015JREMBTR/p1647529064956649
GitHub Issue Link:
Doc Update Link:
Summary: Customer reported a sudden increase of users encountering Cloning in Progress while attempting to search their large monorepo, and wanted to know what caused it.
We explored a number of possibilities, starting with checking on disk space and RAM, but the customer reported that everything on that front seemed fine. Digging into the logs unearthed a surprising number of auth issues, which the customer expects is tied to their recent move from GitHub to GitHub Enterprise. This would certainly lead to cloning errors, which would in turn lead to an increase in attempts to sync, which could explain the behavior in question - except for the fact that 99% percent of their searches are for their monorepo, which the customer said shouldn't be affected by that.
I also shared information about the gitLongCommandTimeout, in case the problem is coming from the monorepo just taking longer than the default one hour to clone. The customer thought this seemed unlikely, and decided not to pursue it.
The customer eventually decided they were okay with letting this be for now, and will raise the issue again if they are able to gather more details on their end. They also decided to upgrade, so there's always a chance that the performance improvements targeted specifically at monorepos in 3.37 and 3.38 will resolve the underlying problem, despite us not being able to pin it down.
https://docs.sourcegraph.com/admin/install/resource_estimator https://docs.sourcegraph.com/admin/config/site_config
