zendeskTicketNumber: 8724
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/8724
title: grail - prevent auto fetch of specific repo -disk space request
Application engineer: Warren Gifford
Customer: GRAIL 
Date: June 3, 2022
Version: 3.30.4â€‹
Deployment: kubernetes
External Services: AWSCODECOMMIT,OTHER,PHABRICATOR
Auth Providers: builtin,http-header
Slack Links:
GitHub Issue Link: https://github.com/sourcegraph/customer/issues/1018
Doc Update Link:
Summary: Customer observed frequent reclones of their large monorepo
Check the gitserver logs and grep for the name of the repo, additionally check repo-updater logs the same way
Gather git-stats info on the monorepo
It was observed in the logs that disk space was running out on the instance causing garbage cleanup to reclone this repo
      "message": "t=2022-06-06T17:57:41+0000 lvl=warn msg=\"cleanup: removed least recently used repo\" repo=/data/repos/gitlab.com/grailbio/grail/.git how old=5m28.761069642s free space in GiB=32.736 actual percent of disk space free=13.357 desired percent of disk space free=10.000 space freed in GiB=35.630 how much space to free in GiB=0.189"
