zendeskTicketNumber: 9169
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/9169
title: New message in support-booking
Application engineer: Stomzy Mwendwa
Customer: Booking.com 
Date: June 20, 2022
Version: 3.40.2
Deployment: kubernetes
External Services: GITLAB
Auth Providers: gitlab
Slack Links: https://sourcegraph.slack.com/archives/C024D1ESXUH/p1655806365729199
GitHub Issue Link: N/A
Doc Update Link: N/A
Summary: n particular we're observing some "interesting":thinking_face: behavior be in our gitserver metrics.Relevant data point: A few days ago (17-Jun), we have bumped available memory from 14G to 22G Current observations (see screenshots): Shard 0 and 2 have stepped up in memory significantly since 20-Jun \~16:40. And another step just now. What's suddenly happening here? Also, there's a very significant network spike at the same point in time (see screenshot with zoomed in timeline) Shard 1 seems to be still garbage collecting frequently (\~1/hour). It was more frequent before though. Is this an indication it needs even more memory? Hope you can help us to understand what we see, and better tune the system.
Grab gitserver and repo-updater logs
t=2022-06-21T08:46:14+0000 lvl=eror msg="runUpdateLoop: error updating repo" uri=gitlab.booking.com/controlplane/b-jareasfragoz2-ufi-api err="error cloning repo: repo gitlab.booking.com/controlplane/b-jareasfragoz2-ufi-api not cloneable: exit status 128 (output follows)
Removing all soft deleted repositories settled the resources issue.
