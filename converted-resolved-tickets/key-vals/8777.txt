zendeskTicketNumber: 8777
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/8777
title: # Workaround For Negative Structural Search
Application engineer: Alex Jean-Baptiste
Customer: Neo Financial 
Date: June 6, 2022
Version: 3.37.0​
Deployment: docker-compose
External Services: GITHUB
Auth Providers: builtin,github
Slack Links: https://sourcegraph.slack.com/archives/C034ZJQSAG6/p1654545341433609
GitHub Issue Link: N/A
Doc Update Link: N/A ​
Summary: ​​Hey all :wave: it's question time! :blush:I'm doing a search where I'm looking for a particular pattern we've been trying to encourage across our services with a select:repo and it gives me the repos that use the new pattern exactly the way I want them, but I'd also like to search now for repos that do not use the new pattern, so basically a negative of my current search. I'm using structural search and -content isn't supported apparently, is there another way I could achieve this?
​​Hello @Ronnie. After doing some testing on our end it would seem there is no way to do a negative structural search at the current moment.I attempted to use the not operator to no avail.I can contact your assigned CE and get that added as a feature request.As a workaround, however you can do the following: run the search that you do have working and save that list of repos in whatever format you choose (This Sourcegraph search results exporter extension can help) You can also perform this search with src-cli (our command-line tool) pull all repo names from the Sourcegraph repo table in our main Postgres database and save that in whatever format you choose do a diff on both lists
All of the above steps could be combined into a script to run while you track this pattern adoption.I know that this is not ideal. (A negative structural search would be very powerful).Please let me know if this method might work for you.
https://docs.sourcegraph.com/cli https://sourcegraph.com/extensions/sourcegraph/search-export
