zendeskTicketNumber: 4745
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/4745
title: GitHub Repos stuck in cloning state
Application engineer: Michael Bali
Customer: Logitech 
Date: Nov 24, 2021
Version: ​N/A
Deployment: N/A
External Services: N/A
Auth Providers: N/A
Slack Links: https://sourcegraph.slack.com/archives/C021P0GSNUW/p1637802896002000
GitHub Issue Link: N/A
Doc Update Link: N/A
Summary: The customer can see repositories cloning continuously, more like repos getting stuck in the cloning state.
-   I initially thought, this was happening as a result of them recently adding repos to Sourcegraph. I felt this may be slow. Sourcegraph would clone/create a copy of repos in your code host to make it searchable on sourcegraph and probably the reason why this happens regularly is its cloning new repos added. Apparently, that wasn't the case.
-   Asked him to check that the repo status page just to be sure SG is only cloning repos they want and ye they confirmed that.
-   Looking at the screenshots I see a lotof spikes which means the sourcegraph volume was getting maxed out.
-   The customer added extra volumes to their sourcegraph instance. This appears to have resolved the issue.  (The continuous cloning and repos being deleted due to disk pressure has come to a dead stop.)
-   there is a way to control the polling frequency in the site config, using the repoListUpdateInterval
// Interval (in minutes) for checking code hosts (such as GitHub, Gitolite, etc.) for new repositories. "repoListUpdateInterval": 1,
-   https://docs.sourcegraph.com/admin/config/site_config
None
