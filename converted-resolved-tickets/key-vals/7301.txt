zendeskTicketNumber: 7301
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/7301
title: Re: Requesting gitserver SME help
Application engineer: Michael Bali
Customer: Goldman Sachs 
Date: Apr 1
Version: ​N/A
Deployment: N/A
External Services: N/A
Auth Providers: N/A
Slack Links: email
GitHub Issue Link: N/A
Doc Update Link: N/A
Summary: -   The Gitserver Pod kept crashing.
-   The code intelligent feature doesn't work on Gitlab Native Integration.
-   Sourcegraph Prometheus grafana dashboard is not accessible at URL
-   the logs from the gitserver-4 pod.
-   output from describe gitserver.
-   Later discovered that code intel does not work on their sourcegraph instance itself because they have an air-gapped deployment which does not allow them to download the programming language extension for search based code intel
-   The error you see in the logs is related to missing directories when additional dashboards aren't provided which causes Grafana to be slow or not accessible.
-   The issue with gitserver has been temporarily remediated by increasing the liveness timeout from 60 seconds to 3600 seconds.
-   upgraded sourcegraph to version 3.35 and enabled Gitlab SSO.
-   Upon further investigation, for code intelligence, the Sourcegraph Extensions for languages will need to be enabled for the entire organization by the Admin.  To do this, you would need to set up a private registry for the offline extensions.  The Admin would then need to install them and enable them for the entire organization.  Once that is complete then code intelligence will appear for all users.  Users would not have to download anything since the admin would have done that for everyone. 
-   This happens to be a [bug](https://github.com/sourcegraph/sourcegraph/issues/29351) that is now fixed in [version 3.36](https://sourcegraph.com/github.com/sourcegraph/sourcegraph@v3.35.1/-/blob/docker-images/grafana/Dockerfile?L40-42). A version upgrade should get this resolved. Also, a temporary fix you can also implement is to mount an empty directory.
    - mountPath: /sg_grafana_additional_dashboards
           name: additional-dashboard
    - name: additional-dashboard
         emptyDir: {}
N/A
    error msg=\""Failed to read content of symlinked path\"" logger=provisioning.dashboard type=file name=sourcegraph_additional path=/sg_grafana_additional_dashboards error=\""lstat /sg_grafana_additional_dashboards: no such file or directory
