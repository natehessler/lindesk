zendeskTicketNumber: 7824
zendeskLink: https://sourcegraph.zendesk.com/agent/tickets/7824
title: Docker Compose version requirements
Application engineer: Gabe Torres
Customer: Cisco Meraki 
Date: Apr 24
Version: 3.35.1â€‹
Deployment: docker-compose
External Services: GITLAB,OTHER
Auth Providers: builtin
Slack Links: https://sourcegraph.slack.com/archives/C02DNE235TL/p1650670464902089
GitHub Issue Link:
Doc Update Link:
Summary: I just upgraded from 3.35 - 3.39.0. I went pretty smoothly. I did hit one snag. The system has docker-compose version 1.26.2. It complained that service_completed_successfully is not valid. It seems to work correctly, all services are up and I didn't see any real errors in the docker logs
The migrator service was introduced in 3.37.0 to decouple schema migrations from other services. This was done to help with an issue where the app would start before the migrations were completed and this would leave the database in a 'dirty state'. The service_completed_successfully flag tells the frontend service to wait for the migrator to finish the schema migrations to prevent any database errors. It looks like the migrations finished successfully in this case since you are not seeing any errors but removing that flag could affect the app start-up sequence if there are migrations that take a long time. It looks like service_completed_successfully was introduced in docker-compose 1.29.0
