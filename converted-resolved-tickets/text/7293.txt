-   Application engineer: Kelvin Lee
-   Customer: Improbable 
-   Date: Mar 31
-   Version: ​3.32.1
-   Deployment: kubernetes
-   External Services: github
-   Auth Providers: github, builtin
-   Slack Links: [Slack with customer](https://sourcegraph.slack.com/archives/C02LRB9SLQ5/p1648801894762839), and [RFH Ping, which has some useful info](https://sourcegraph.slack.com/archives/CMMTWQQ49/p1649293712778079) .
-   GitHub Issue Link: [RFH](https://github.com/sourcegraph/customer/issues/812) , and then [public issue](https://github.com/sourcegraph/sourcegraph/issues/33619)
-   Doc Update Link: None
Error being surfaced to UI on a Batch Changes page: malformed changeset spec ID
Customer described that they were generating previews successfully via src batch preview. They were also able to visit the URL that is generated by src batch preview.
However, after selecting a changeset on the visited URL, and choosing "Publish on Apply", the aforementioned error would surface.
Things worth trying: - 
> There's probably less logging than you'd expect here, in truth.
The RFH continues to mention, though, that there is the 
Ended up being a bug. The public issue was filed [here](https://github.com/sourcegraph/sourcegraph/issues/33619) . Note that, in the RFH + in the public issue, that this issue is not isolated to "Publish on Apply". Rather, the other dropdown actions would also generate the error("Publish draft on Apply", "Unpublish on Apply"). It's suggested in a comment of a [Slack thread](https://sourcegraph.slack.com/archives/CMMTWQQ49/p1649357929561129?thread_ts=1649293712.778079&cid=CMMTWQQ49) that this error might only generated if (a) there a batch change with more than 1 page of changesets and (b) the aforementioned action-menu flow is engaged with (i.e. choosing a dropdown action). The comment is quoted below:
> It's definitely still there on main, so I assume it's in 3.38. The key there might be that you need a batch spec that has more than a single page of changeset specs (which, practically, means more than 15) in order to trigger the two phase "select all" behaviour that's buggy.
WORKAROUNDS, as shared in the RFH: \> I'm not quite sure what you mean by this, but I think there are probably (at least) two workarounds: \> - Apply the batch spec without setting the publication state, then use bulk actions on the batch change to set the publication state. \> - Set published: draft or published: true in the batch spec, and re-apply.
None
    * malformed changeset spec ID "a": illegal base64 data at input byte 0 * malformed changeset spec ID "l": illegal base64 data at input byte 0
This is the specific message. Note that the letters 'a' and 'l' are being sent. The discussions between the Slack and the RFH seem to suggest that this is the characters in the word "all" somehow being interpreted as a spec ID. The discussion seems to suggest it's coming from the "Select all" phrase, which can be found in the UI.
