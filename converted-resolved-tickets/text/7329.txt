-   Application engineer: Quinlan Sparks
-   Customer: Wayfair 
-   Date: Apr 4
-   Version: 3.37.0
-   Deployment: kubernetes
-   External Services:
-   Auth Providers:
-   Slack Links: https://sourcegraph.slack.com/archives/C024QE1K0FP/p1649085345254719
-   GitHub Issue Link:
-   Doc Update Link:
> Hi All- we were tracking several metrics via code insights which we have now lost. Any reason our insights were removed?
I suspected that there was a migration issue during their recent upgrade to 3.37, and asked them to check their database for signs of dirty database errors. The customer was adamant for a while that the insights database had been externalized to Google CloudSQL, and was unresponsive for several days while trying to get access. When they eventually got back to me, they revealed that the database was, in fact, in the Kubernetes cluster.
They apparently use an internal deployment plugin that caused some problems during the upgrade, and based on their understanding of their deployment and the steps they took, they're fairly certain that the volumes and all the data therein were deleted. With the Code Insights database no longer relying on TimescaleDB in version 3.38, they're going to externalize the database moving forward to avoid running into this problem again.
I pointed out once again that the insights might not be truly lost, and made yet another request to check for signs of a dirty database, but have received no further reply. Given their confidence, their silence, and their plan to avoid a repeat of this issue, I'm closing this out.
https://docs.sourcegraph.com/admin/how-to/dirty_database
