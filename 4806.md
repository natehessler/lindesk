

# Capital One Production Upgrade To  3.31.0 <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4806](https://sourcegraph.zendesk.com/agent/tickets/4806)

- Application engineer: Alex Jean-Baptiste

- Customer: Capital One <!-- Redact if this contains personally identifying information -->

- Date: Nov 30


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: ​3.29.0 (Originally)

- Deployment: Kubernetes 

- External Services: GitHub

- Auth Providers:builtin, github





## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C01QNMSLTFZ/p1638310095058600

- GitHub Issue Link: N/A

- Doc Update Link: N/A



## Summary

### Customer Question
The customer requested help when upgrading from 3.29.0 to 3.31.0.


### Application Engineer Answer
A meeting was scheduled with Delivery, Support, and the customer to guide the upgrade process. 
Things to note:



Capital One has a private image repository, so when upgrading they are responsible for pulling the latest image of all Sourcegraph services, tagging them, and adding them to their internal private registry in order for the upgrade to work.
repo-updaterservice stayed in an unhealthy state until the gitserver service was able to successfully mount to the persistent volume in their AWS environment (this mount took a very long time nothing to do it about it really since this is an AWS speed issue).



## Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/updates/kubernetes


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4806.md -->
