​
# Re: GitHub OAuth / Server restart <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8920](https://sourcegraph.zendesk.com/agent/tickets/8920)
- Application engineer: Alex Jean-Baptiste
- Customer: Aurora <!-- Redact if this contains personally identifying information -->
- Date: June 13, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.41.0
- Deployment: Docker Compose 
- External Services: GitHub
- Auth Providers: builtin, openidconnect, saml, github


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: N/A
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/1076
- Doc Update Link: N/A
​
## Summary
### Description of Customer Issue
​
The customer experiences a lack of repository permissions enforcement. GitHub SSO for GitHub organizations is not enforced when using GitHub as an auth provider.
​
The customer is allowed to access repos from GitHub without clicking "Authorize" when signing into Sourcegraph with GitHub.
​
### Troubleshooting Steps
​
​
Add GitHub as an auth provider
Make sure the GitHub instance is using SSO to restrict GitHub organization access
Log into Sourcegraph with GitHub on a non-soucegraph-admin and do not authorize access to the "Aurora" organization (an organization that you know Sourcegraph has repos from loaded into it) and simply press continue
Attempt the following search repo:^github\.com/aurora
A list of all repos in the organization will become available to a user that has not authorized the Aurora organization through GitHub SSO.



​
​
### Resolution
​
No current known resolution. The customer will use Okta as an auth provider until repository permissions reworking potentially addresses this issue.
​
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/repo/permissions#complete-sync-vs-incremental-sync
​
https://docs.github.com/en/enterprise-cloud@latest/authentication/authenticating-with-saml-single-sign-on/viewing-and-managing-your-active-saml-sessions
​
https://docs.sourcegraph.com/admin/auth#github
​
https://docs.github.com/en/organizations/restricting-access-to-your-organizations-data/approving-oauth-apps-for-your-organization
​
​
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
​

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8920.md -->
