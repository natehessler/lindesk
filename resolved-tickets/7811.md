
# Twitter - upgrade - ERROR: deadlock detected (SQLSTATE 40P01) <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7811](https://sourcegraph.zendesk.com/agent/tickets/7811)
- Application engineer: Warren Gifford
- Customer: Twitter <!-- Redact if this contains personally identifying information -->
- Date: Apr 22

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.37.0​
- Deployment: kubernetes
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Description of Customer Issue

During an upgrade to v3.38 Twitters admin reported a failure to run one of the migrations

ERROR: deadlock detected (SQLSTATE 40P01)

The migration that failed: https://sourcegraph.com/github.com/sourcegraph/sourcegraph/-/blob/migrations/frontend/1647282553/up.sql?subtree=true

### Troubleshooting Steps

### Resolution

This issue was resolved by rerunning the migration as detailed in our troubleshooting docs

https://docs.sourcegraph.com/admin/how-to/dirty_database

### Relevant Docs Pages Used/Created

^^

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7811.md -->
