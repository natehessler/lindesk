
# Uses of some graphql endpoints <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#11121](https://sourcegraph.zendesk.com/agent/tickets/11121)
- Application engineer: Michael Bali
- Customer: Uber <!-- Redact if this contains personally identifying information -->
- Date: September 20, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.27.4​
- Deployment: kubernetes
- External Services: BITBUCKETSERVER,GITHUB,GITOLITE,PHABRICATOR
- Auth Providers: http-header


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/CTGBWCKM0/p1663676700836089
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question

- Hi, I'm performing user behaviour analysis after recent security breach at uber. Can you help me understand what `/.api/graphql?BlobContent HTTP/1.1` request does and how to trigger it?

- is this allowed for all users ? https://github.com/sourcegraph/sourcegraph/blob/16cf193fa3a0e7c6eb13b4e973f73ea874d15e27/cmd/frontend/graphqlbackend/schema.graphql#L364

- is `addPhabricatorRepo` allowed for all users ? https://github.com/sourcegraph/sourcegraph/blob/16cf193fa3a0e7c6eb13b4e973f73ea874d15e27/cmd/frontend/graphqlbackend/schema.graphql#L364

- what is the use of `ExtensionsWithPrioritizeExtensionIDsParamAndNoJSONFields`

### Application Engineer Answer

I did some investigating and below are my findings:
- `/.api/graphql?BlobContent HTTP/1.1` Fetches the lines of a given file at a given commit from the [Sourcegraph API](https://sourcegraph.com/github.com/sourcegraph/sourcegraph/-/blob/client/browser/src/shared/repo/backend.tsx?L200:27#tab=def). Will return an empty array if the repo, commit or file does not exist or an error happened. The vscode also makes use of the graphql extension [here](https://sourcegraph.com/github.com/sourcegraph/sourcegraph/-/blob/client/vscode/src/backend/blobContent.ts) 

- `ExtensionsWithPrioritizeExtensionIDsParamAndNoJSONFields` the above is a query used by the BROWSER-EXTENSION.

- `addPhabricatorRepo` Adds a Phabricator repository to Sourcegraph. This is a query that is part of the [graphql API](https://sourcegraph.com/github.com/sourcegraph/sourcegraph/-/blob/client/shared/src/extensions/helpers.ts?L10:5), anyone with access to the graphql API console can make use of the query.

### Relevant Docs Pages Used/Created

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 11121.md -->
