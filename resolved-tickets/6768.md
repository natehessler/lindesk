03/15/2022 Update
Still waiting to hear back from the customer, but have gently nudged them again this morning. Not really expecting to hear anything today, thanks to the time zone difference. Drafting up the case summary now on the assumption that everything's going to come back green. Because what's life without a little hubris.
 
# Large file not search not working <!-- Ticket Title  Hint: include keywords to make it searchable -->
 
- Zendesk Link: [#6768](https://sourcegraph.zendesk.com/agent/tickets/6768)
- Application engineer: Quinlan Sparks
- Customer: Criteo <!-- Redact if this contains personally identifying information -->
- Date: Mar 10

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->
 
## Technical Environment
- Version: 3.37
- Deployment: Kubernetes
- External Services:
- Auth Providers:
 
 
## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/CV5KX7T70/p1646927882014799 
- GitHub Issue Link:
- Doc Update Link: https://github.com/sourcegraph/sourcegraph/pull/32629 
 
## Summary
### Description of Customer Issue
Customer reported a large JSON file not appearing in search results as expected, despite having added the largeFiles tag in their site configuration. When I asked how, specifically, they had set that configuration up, they sent me this:
"search.largeFiles": [
    "**.json"
]
 
### Troubleshooting Steps
I replicated the issue by creating an indexing a dummy repo with JSON files of various sizes on different levels, and set up my site config to match the customer's. Large files on the root level were indexed and searchable, but anything nested was ignored. I experimented with indexing large nested files by including direct paths, which worked, and from there was able to extrapolate that there was some confusion stemming from the layout of the [search details page](https://docs.sourcegraph.com/code_search/explanations/search_details). I have opened up a PR to clarify the difference in syntax between site configuration and the .sourcegraph/ignore file.
 
### Resolution
I informed the customer of the correct syntax to index large nested files, as well as pointing out that if this is the only large file they want to make sure is searchable, including the direct path from root in site config would take care of it. There has been no further communication despite multiple followup inquiries, so I am considering this resolved.
 
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/code_search/explanations/search_details
https://docs.sourcegraph.com/admin/config/site_config#search-largeFiles
 
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
 

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 6768.md -->
