
# Wayfair - GCP Cloud SQL max_connections <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#5795](https://sourcegraph.zendesk.com/agent/tickets/5795)
- Application engineer: Warren Gifford
- Customer: Wayfair <!-- Redact if this contains personally identifying information -->
- Date: Jan 25

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.36.1​
- Deployment: kubernetes
- External Services: GITHUB
- Auth Providers: saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question
Customer encountered an error that seemed to indicate a database max_connections problem but of the google cloud SQL variety. This was observed after an upgrade, and the customer wanted to know if the issue resulted from anything in the upgrade

###Application Engineer Answer
This is usually caused by big queries -- it could be related to changes in load from code insights

upgrading the max_connections settings should resolve things

t=2022-01-25T18:16:12+0000 lvl=eror msg="doResults: failed to list user private repos" error="failed to connect to `host=sg-cloudsql-pr
oxy user=svc_sourcegraph_rw database=sourcegraph`: server error (FATAL: remaining connection slots are reserved for non-replication sup
eruser connections (SQLSTATE 53300))" user-id=0



### Relevant Docs Pages Used/Created

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 5795.md -->
