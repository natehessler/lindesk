
# SourceGraph Upgrade 3.37 to 3.38 Issue - Docker Compose YAML error <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8622](https://sourcegraph.zendesk.com/agent/tickets/8622)
- Application engineer: Michael Bali
- Customer: bet365 <!-- Redact if this contains personally identifying information -->
- Date: June 1, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.35.1​
- Deployment: docker-compose
- External Services: GITLAB
- Auth Providers: gitlab,gitlab


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Description of Customer Issue
The Customer was trying to upgrade their instance from 3.37 to 3.38. However, when they run docker-compose pull command the get a YAML error. 

### Troubleshooting Steps
I did my research and I know the minimum version of docker-compose that supports the `service_completed_successfully`  dependency condition is version `1.29`.I attempted reproducing this on the DC version `1.29 `and `2.50` I was able to pull without any errors.

### Resolution
That error is definitely a sign that an old version of docker-compose is being used. The root user is actually pulling an older version in `/sbin` and they have rectified that.

### Relevant Docs Pages Used/Created

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
``` 
ERROR: The Compose file './docker-compose.yaml' is invalid because:
services.sourcegraph-frontend-internal.depends_on.migrator.condition contains "service_completed_successfully", which is an invalid type, it should be a service_started, or a service_healthy
```


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8622.md -->
