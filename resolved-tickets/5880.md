
# graphql query for grabbing users and general examples <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#5880](https://sourcegraph.zendesk.com/agent/tickets/5880)
- Application engineer: Kelvin Lee
- Customer: Upwork Global Inc. <!-- Redact if this contains personally identifying information -->
- Date: Jan 28

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.33.0​
- Deployment: docker-compose
- External Services: BITBUCKETSERVER
- Auth Providers: builtin,saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: [Slack](https://sourcegraph.slack.com/archives/C01S5DM6NG7/p1643395961392419)
- GitHub Issue Link: None
- Doc Update Link: None

## Summary
### Customer Question
How to create a query that will get all users and their emails, and guidance for general documentation

### Application Engineer Answer
The main docs page is [here](https://docs.sourcegraph.com/api/graphql), with examples [here](https://docs.sourcegraph.com/api/graphql/examples). I provided them the following as a stepping stone:

```
{
  users(activePeriod: ALL_TIME) {
    totalCount
    nodes {
      username
      emails {
 user {
   id
 }
 }
      usageStatistics {
        lastActiveTime
      }
    }
  }
}
```

^ This may not exactly get what they want, but it was a good enough start for this ticket/customer.

In general, the Documentation Explorer on the right-hand side should give some guidance for a user attempting to use the GraphQL API. Here's what I described to the customer:

> As an aside on how I used the Documentation Explorer: I threw keyword "emails" into the search bar, dug down into "User.emails", and then dug down again into "UserEmail" under the Types header. Just drilling down until I found some useful fields to try

Lastly, customer asked a bit about CSV output, but it doesn't seem we support anything like that.

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/api/graphql

https://docs.sourcegraph.com/api/graphql/examples 

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 5880.md -->
