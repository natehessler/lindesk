
# Corrupt repo <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9006](https://sourcegraph.zendesk.com/agent/tickets/9006)
- Application engineer: Gabe Torres
- Customer: Reddit <!-- Redact if this contains personally identifying information -->
- Date: June 14, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.36.2​
- Deployment: kubernetes
- External Services: GITHUB
- Auth Providers: builtin,github

## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02BJ8T258D/p1655250354056159 
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/1014 
- Doc Update Link:

## Summary
### Description of Customer Issue
The customer reported some error logs in the repo updater.

### Troubleshooting Steps
We ran git prune and git fetch inside the repo. Git prune failed and git fetch succeeded. Running git gc failed with the following, indicating a corrupt repo:
```
error: refs/pull/103626/merge does not point to a valid object!
fatal: bad object refs/pull/103626/merge
fatal: failed to run repack
```

### Resolution
I recommended removing the repo to force a reclone but the issue resolved itself after gitserver ran sg maintenance on the repo. Sg maintenance attempts to reclone the corrupt repo every 2 days.

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
```
fatal: bad object 902eeb79632e629015ac4c1b87b174bc95a9c88f\\nerror: https://github.com/Homebrew/homebrew-core did not send all necessary objects\\n\\n\
```


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 9006.md -->
