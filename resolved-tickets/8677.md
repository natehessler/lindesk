
# CSV exporter does not download the full results seen in the UI <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8577](https://sourcegraph.zendesk.com/agent/tickets/8577)
- Application engineer: Michael Bali
- Customer: Atlassian <!-- Redact if this contains personally identifying information -->
- Date: May 30, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.34.2​
- Deployment: kubernetes
- External Services: BITBUCKETCLOUD,BITBUCKETSERVER,GITHUB
- Auth Providers: saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C0183JV3Q0Y/p1653971058722659
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question
The customer has this query `\spadding-?(Top|Bottom|Right|Left)?:[^;,]+ repo:^bitbucket\.org/atlassian/atlassian-frontend$ NOT file:packages/design-system/.* NOT file:..*(examples|tests|constellation).* count:3000` which according to the UI generates "2.3k results", however when he click to download the CSV from the button "Export search results" I get a file with only 875 lines (and the first one is the header, so apparently 874 results).

### Application Engineer Answer
The Sourcegraph [Streaming API] (https://docs.sourcegraph.com/api/stream_api) determines the number of results in the Sourcegraph UI. However, our Search-export extension runs a query on our GraphQL API and will only export the complete list of results if the search query includes the `count:all` keyword.
All you need to do is modify` count:3000` to `count:all` and attempt to download again. Let me also mention, If one file has two matches, the file will be listed only once in the exported csv. Hence number of lines in CSV Might be lower than number of results.

### Relevant Docs Pages Used/Created
- https://docs.sourcegraph.com/admin/how-to/troubleshoot-sg-extension#search-export-can-i-export-search-results

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8577.md -->
