
# Repositories missing from organization <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8351](https://sourcegraph.zendesk.com/agent/tickets/8351)
- Application engineer: Michael Bali
- Customer: finpension <!-- Redact if this contains personally identifying information -->
- Date: May 19, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​N/A
- Deployment: N/A
- External Services: N/A
- Auth Providers: N/A


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: N/A 
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/968
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
All the repositories we added to the organization “finpension” are gone and are not appearing when re-adding them.

### Troubleshooting Steps
Raised this to the cloud team and we figured that GitLab made a breaking change that affects our integration with this code host. All users/customers using GitLab.com, and who have upgraded their on-perm GitLab to the version >= 15.0 are believed to be affected. Older GitLab version that have OAuth access token expiry enabled would also experience this problem.

### Resolution
Gitlab no longer supports tokens without an expiry date And the OAuth token expiration time is [two hours](https://docs.gitlab.com/ee/integration/oauth_provider.html#:~:text=at%20least%20every%20two%20hours).
We made some [modifications](https://github.com/sourcegraph/sourcegraph/pull/36042) to our code base to mitigate this issue 


### Relevant Docs Pages Used/Created
- https://github.com/sourcegraph/sourcegraph/pull/36042
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8351.md -->
