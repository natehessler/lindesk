

# precise-code-intel-worker reporting SQL uniqueness constraint violations <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4727](https://sourcegraph.zendesk.com/agent/tickets/4727)

- Application engineer: Ben Gordon

- Customer: Segment.io Inc <!-- Redact if this contains personally identifying information -->

- Date: Nov 23


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.28.0​

- Deployment: kubernetes

- External Services: GITHUB

- Auth Providers: openidconnect





## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
  - https://sourcegraph.slack.com/archives/CKMSNT9C0/p1637689867041700
  - https://sourcegraph.slack.com/archives/CHXHX7XAS/p1637780994158800
  - https://sourcegraph.slack.com/archives/C02E4HE42BX/p1637784887281300
- GitHub Issue Link:
  - https://github.com/sourcegraph/customer/issues/571


## Summary

### Description of Customer Issue
LSIF uploads are failing.  
The precise-code-intel-worker is raising Postgres errors


### Troubleshooting Steps
- Gathered complete logs from precise-code-intel-worker (found nothing aside from the postgres error)
- Ensured that the database was connected correctly to the instance
- Reached out to code-intel
- Code intel identifies a bug in 3.28
- Code intel merges a fix which creates a feature flag, which disables the lsif-go API docs uploads

### Resolution
Delivered the fix to the customer

### Relevant Error / Logs
```
msg=codeintel.lsifstore.WriteDocumentationPages error="ERROR: duplicate key value violates unique constraint \"lsif_data_documentation_pages_pkey\" (SQLSTATE 23505)" count=1.000 elapsed=0.006
```

<!-- Please redact keys, tokens, and personal identifying information -->

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4727.md -->
