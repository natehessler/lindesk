​
# Timeout Error When Deleting A Code Host <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7615](https://sourcegraph.zendesk.com/agent/tickets/7615)
- Application engineer: Alex Jean-Baptiste
- Customer: Capital One <!-- Redact if this contains personally identifying information -->
- Date: Apr 13

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.31.2
- Deployment: AWS ECS
- External Services: GitHub
- Auth Providers: GitHub


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C01QNMSLTFZ/p1649858825348519
- GitHub Issue Link: https://github.com/sourcegraph/sourcegraph/pull/34701
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
The customer repeatedly attempted to delete a code host and received a 504 error on every try.
​
### Troubleshooting Steps
Attempt to delete a code host with xxx,000 repos after changing the code host URL and the access token.
​
### Resolution
The user was walked through accessing the postgres database to delete the code host using the following command TRUNCATE external_service_repos, external_services, repos CASCADE;.
​
A solution to extend the timeout for code host deletions is in flight by the repo management team as of 05/02/2022

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/how-to/run-psql
​
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
​Request to https://sourcegraph.../graphql?DeleteExternalService failed with 504

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7615.md -->
