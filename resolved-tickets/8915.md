# New Slack message in support-allegro <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8915](https://sourcegraph.zendesk.com/agent/tickets/8915)
- Application engineer: Stomzy Mwendwa
- Customer: Allegro <!-- Redact if this contains personally identifying information -->
- Date: June 12, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.39
- Deployment: Kubernetes
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02BF1E7VAN/p1655114990060589 
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question
Hi, I’m preparing spec file for batch update. My step looks like below:
``` - run: cat /tmp/upload-and-publish.yml > .github/workflows/upload-and-publish.yml
container: ubuntu:18.04
files:
/tmp/upload-and-publish.yml: |
name: Upload and publish
on:
      workflow_dispatch:
        inputs:
          branchName:
            type: string
            description: 'Branch to update in opbox-web'
            required: false

    jobs:
      upload_and_publish:
        name: Reuse workflow
        uses: allegro-internal/opbox-component-template/.github/workflows/upload-and-publish-reusable.yml@v1
        secrets: inherit
        with:
          branchName: $```


There is an issue with last line, because I want to paste GitHub workflow variable, but Sourcegraph is trying to evaluate it as its own (like in https://docs.sourcegraph.com/@3.40/batch_changes/references/batch_spec_yaml_reference#examples-9example> in reference). So my question is, how can I escape the characters of this expression and paste it “as is”? Or maybe is there another solution?
### Application Engineer Answer
Ah thanks for the error message Piotr. I think I see what we could be missing here. Because we're using the literal sequence in a non-run field, we can escape this in your batch spec file with:
${{ "${{ github.event.inputs.branchName }}" }}

I made the change in your batch spec file.
name: migrate-lego-components-to-reusable-workflows
description: Migrate Lego's components to reusable workflows

on:
  - repositoriesMatchingQuery: repo:github.com/allegro-internal/opbox-(accordion|carousel|container)

steps:

  - run: cat /tmp/upload-and-publish.yml > .github/workflows/upload-and-publish.yml
    container: ubuntu:18.04
    files:
      /tmp/upload-and-publish.yml: |
        name: Upload and publish

        on:
          workflow_dispatch:
            inputs:
              branchName:
                type: string
                description: 'Branch to update in opbox-web'
                required: false

        jobs:
          upload_and_publish:
            name: Reuse workflow
            uses: allegro-internal/opbox-component-template/.github/workflows/upload-and-publish-reusable.yml@v1
            secrets: inherit
            with:
              branchName: name: migrate-lego-components-to-reusable-workflows
description: Migrate Lego's components to reusable workflows

on:
  - repositoriesMatchingQuery: repo:github.com/allegro-internal/opbox-(accordion|carousel|container)

steps:

  - run: cat /tmp/upload-and-publish.yml > .github/workflows/upload-and-publish.yml
    container: ubuntu:18.04
    files:
      /tmp/upload-and-publish.yml: |
        name: Upload and publish

        on:
          workflow_dispatch:
            inputs:
              branchName:
                type: string
                description: 'Branch to update in opbox-web'
                required: false

        jobs:
          upload_and_publish:
            name: Reuse workflow
            uses: allegro-internal/opbox-component-template/.github/workflows/upload-and-publish-reusable.yml@v1
            secrets: inherit
            with:
              branchName: ${{ "${{ github.event.inputs.branchName }}" }}

changesetTemplate:
  title: LEGO-1717 | Migrate component to reusable workflows
  body: |
    This pull request introduces [reusable workflows](https://discourse.allegrogroup.com/t/opbox-remote-visual-regression-dependabot-and-the-last-github-workflow-update-you-will-ever-have-to-do/5278#reusable-github-workflows-2)
    to this project. If for any reason the current workflows are different than jobs in reusable workflows, please adapt the code or discard this changes.
  branch: feature/LEGO-1717-reusale-workflows
  commit:
    message: LEGO-1717 | Migrate component to reusable workflows

changesetTemplate:
  title: LEGO-1717 | Migrate component to reusable workflows
  body: |
    This pull request introduces [reusable workflows](https://discourse.allegrogroup.com/t/opbox-remote-visual-regression-dependabot-and-the-last-github-workflow-update-you-will-ever-have-to-do/5278#reusable-github-workflows-2)
    to this project. If for any reason the current workflows are different than jobs in reusable workflows, please adapt the code or discard this changes.
  branch: feature/LEGO-1717-reusale-workflows
  commit:
    message: LEGO-1717 | Migrate component to reusable workflows

Please re run the preview and let me know if it works?
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/batch_changes/references/faq#how-can-i-use-github-expression-syntax-literally-in-my-batch-spec 
