
# Authentication behind proxy <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9383](https://sourcegraph.zendesk.com/agent/tickets/9383)
- Application engineer: Gabe Torres
- Customer: Pinterest <!-- Redact if this contains personally identifying information -->
- Date: June 28, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.33.0​
- Deployment: docker-container
- External Services: GITHUB,OTHER
- Auth Providers: builtin


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question
Is it safe/reasonable to allow-list the
`/.api/` paths? In the
case where we are actually authenticated in a browser, through, I am
not sure we would be able to persist the x-forwarded-user header. Is
it enough for the SG auth cookies to be set to ensure SG responds to
these requests appropriately?

### Application Engineer Answer
Allow-listing the /.api endpoint should be ok since requests without the token or cookie will be rejected. Requests to the API from the browser are authenticated with cookies, you can read a bit more about API authentication here:

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/dev/security/csrf_security_model#authentication-in-api-endpoints  

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 9383.md -->
