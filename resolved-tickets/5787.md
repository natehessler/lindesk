
# ServiceTitan - Worker Alerts <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#5787](https://sourcegraph.zendesk.com/agent/tickets/5787)
- Application engineer: Warren Gifford
- Customer: ServiceTitan <!-- Redact if this contains personally identifying information -->
- Date: Jan 25

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​v3.35.0
- Deployment: k8s
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02QZQ10JAY/p1643127651047400
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/679
- Doc Update Link: https://github.com/sourcegraph/sourcegraph/pull/30709/files

## Summary
### Description of Customer Issue
Customer reporting many alerts in the worker pod for containers OOM -- alerts as well a a bunch of worker-automation-jobs that are OOM

### Troubleshooting Steps
After looking over worker logs gitserver and various other services it was clear this wasn't the result of processes on the worker node. Having a look at the grafana and prometheus yamls we discovered the namespace limiting prometheus config was commented out -- in multitenant kubernetes clusters this needs to be uncommented

### Resolution
uncommented

### Relevant Docs Pages Used/Created
https://github.com/sourcegraph/deploy-sourcegraph/blob/dax/clarify_prom/base/prometheus/prometheus.ConfigMap.yaml#L242-L260

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 5787.md -->
