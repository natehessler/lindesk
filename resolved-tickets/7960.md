
# src login not working <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7960](https://sourcegraph.zendesk.com/agent/tickets/7960)
- Application engineer: Gabe Torres
- Customer: Shipt <!-- Redact if this contains personally identifying information -->
- Date: May 2

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ‚Äã
- Deployment:
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question
What am I doing wrong here:

```
‚ûú  ~ echo $SRC_ENDPOINT && echo $SRC_ACCESS_TOKEN
https://shipt.sourcegraph.com (https://shipt.sourcegraph.com/)
my-actual-token-here
‚ûú  ~ src login "https://shipt.sourcegraph.com (https://shipt.sourcegraph.com/)"   

‚ùå Problem: No access token is configured.

üõ†  To fix: Create an access token at https://customer-instance.com/user/settings/tokens, then set the following environment variables:

   SRC_ENDPOINT=https://customer-instance.com (https://customer-instance.com/)
   SRC_ACCESS_TOKEN=(the access token you just created)

   To verify that it's working, run this command again.
‚ûú  ~ src version  
Current version: 3.39.1
Recommended version: 3.39.1 or later
```

### Application Engineer Answer
Sending a curl request with the token worked.
`curl -H 'Authorization: token YOUR_TOKEN' -d '{"query": "query { currentUser { username } }"}' https://shipt.sourcegraph.com/.api/graphql`

Setting the env vars in the same command worked:
`SRC_ENDPOINT=url SRC_ACCESS_TOKEN=token src login`
 
The customer wasn't exporting the environment variables correctly. This worked:
```
export SRC_ENDPOINT=https://customer-instance.com
export  SRC_ACCESS_TOKEN=token
```


### Relevant Docs Pages Used/Created

<!--¬†Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets¬†as a .md file -->
<!-- Name the file 7960.md -->
