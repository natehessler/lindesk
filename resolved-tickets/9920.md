
# Tinder Repo Syncing Issue <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9920](https://sourcegraph.zendesk.com/agent/tickets/9920)
- Application engineer: Jason Harris
- Customer: Tinder <!-- Redact if this contains personally identifying information -->
- Date: July 21, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.41
- Deployment: docker-compose
- External Services: GITHUB
- Auth Providers: builtin,saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C01574FJV35/p1658422357689639 
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
This issue is related to the following issues:
Brex: https://github.com/sourcegraph/customer/issues/1137
Chime: https://github.com/sourcegraph/customer/issues/1135
Booking: https://github.com/sourcegraph/customer/issues/1128 

Customer noticed an issue with repo syncing on a particular repo. A commit had been made on said repo 21 hours previously, and had merged a number of commits since then, but still could not see the results in Sourcegraph. 

This is a known issue with 3.41 having to do with garbage collection causing corrupted repos and multiple requeuing jobs that never get run. This is fixed in 3.42. Workaround for 3.41:

Add two new environment variables to gitserver and replicas in the overrides file. SRC_ENABLE_SG_MAINTENANCE=false and SRC_ENABLE_GC_AUTO=true. This will disable sourcegraph's garbage collection and use git gc instead. This will have sub-optimal performance for mono repos, but will fix the queuing/corruption issue.
Remove any corrupted repos by following the steps here: https://docs.sourcegraph.com/admin/how-to/remove-repo#remove-corrupted-repository-data-from-sourcegraph 


NOTE: steps may be different for non-managed instances.

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 9920.md -->
