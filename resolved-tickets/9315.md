​
# RE: Adjust timing of repo sync <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9315](https://sourcegraph.zendesk.com/agent/tickets/9315)
- Application engineer: Alex Jean-Baptiste
- Customer: AMD <!-- Redact if this contains personally identifying information -->
- Date: June 24, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.40.2
- Deployment: Docker Compose
- External Services: Github
- Auth Providers: builtin, github


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: N/A
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question
​
​Hi, what time does SourceGraph clone/pull our repos?  Can we adjust it to something like 8pm Eastern?  Or do something to speed it up?

Three times in the last two weeks, I’ve tried to search for something and it failed with “clone in progress.”

With my context, it’s worse, it just shows 0 results.
​
​//////////////SECOND EMAIL CORRESPONDENCE FROM CUSTOMER//////////
​
There isn’t any configuration for when or how often a repository is sync’d. I am wary as to why the repositories are continuous being cloned instead of sync’d with the upstream, as this is a very costly operation for large repositories (like drivers and llvm). I think this is a something that might be better discussed with actual SG support (included).

### Application Engineer Answer
​
​Hello, Scott.

I wanted to let you know that the update frequency of repositories that Sourcegraph has already cloned is at maximum 45 seconds.

Sourcegraph does have a setting to control the frequency of cloning new repositories and that is the site config option: repoListUpdateInterval.

This value is configured in minute intervals but cannot be set for a specific time.

I want to also make sure I am understanding your current issue clearly.

Is Sourcegraph constantly re-cloning existing repos?

Or is Sourcegraph constantly having repos added to it?

In addition, please send me the logs for the repo-updater and gitservercontainers using the following command.
​
docker-compose logs $CONTAINER

or (depending on Docker versioning)

docker compose logs $CONTAINER

With these logs, we should be able to see what could be causing this frequent re-cloning behavior since the repo-updater service is responsible for controlling the update frequency of repositories and triggering git fetch commands in gitserver.
​
​//////////////SECOND EMAIL CORRESPONDENCE FROM APPLICATION ENGINEER//////////
​
​Yes, the webhooks option is probably better. You will be able to automate repo updates at a scheduled time using it.

And yes, disk space errors in gitserver are exactly why you are experiencing re-cloning. Repos are in fact being cleaned to recover the space.
​
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/repo/update_frequency#limiting-repository-updates
https://docs.sourcegraph.com/admin/repo/update_frequency
​

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 9315.md -->
