

# Search Timeout On Diff Search With 230k+ Commits <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4434](https://sourcegraph.zendesk.com/agent/tickets/4434)

- CSE: Alex Jean-Baptiste

- Customer: Booking.com <!-- Redact if this contains personally identifying information -->

- Date: Nov 4


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.13.1​

- Deployment: cluster

- External Services: GITLAB

- Auth Providers: builtin,gitlab





## Links
<!-- Data for CSE manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C024D1ESXUH/p1636048238084900

- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/552

- Doc Update Link: N/A



## Summary

### Description of Customer Issue
The customer attempted a diff search on their monorepo that continuously resulted in a timeout.



### Troubleshooting Steps
1. Attempt a diff search for a particular text value that would search through a 230k+ commit history. Similar to this search here: repo:^gitlab\.booking\.com/core/main$@trunk type:diff RT_FLIGHT_PACKAGE timeout:9000s



### Resolution
No resolution as of yet. The search core is working on a way to enhance the performance of diff searches on monorepos as a part of their FY22 Q4 effort.



### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/code_search/reference/queries





### Relevant Error / Logs

<!-- Please redact keys, tokens, and personal identifying information -->




<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4434.md -->
