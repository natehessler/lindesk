

# Sourcegraph extension button breaks on diff in when config has trailing slash <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4687](https://sourcegraph.zendesk.com/agent/tickets/4687)

- Application engineer: Giselle Northy

- Customer: Reddit <!-- Redact if this contains personally identifying information -->

- Date: Nov 22


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.33.0​

- Deployment: kubernetes

- External Services: GITHUB

- Auth Providers: builtin,guithub





## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02BJ8T258D/p1637601788156800

- Github Issue Link: https://github.com/sourcegraph/sourcegraph/issues/28035

- GitHub Issue Link: https://github.com/sourcegraph/sourcegraph/pull/28058



## Summary

### Description of Customer Issue



Sourcegraph extension button breaks on diff in when config has trailing slash



### Troubleshooting Steps



- **Sourcegraph version:** 3.33.0 <!-- the version of Sourcegraph or "Sourcegraph.com" -->



#### Steps to reproduce:



1. Have a trailing `/` on the Sourcegraph URL within the Sourcegraph extension configuration

Example: `https://sourcegraph-mycompanyurl.net/`



2. Click the Sourcegraph button within a diff in a PR review



![image](https://user-images.githubusercontent.com/27694443/142913653-aead0a83-3b40-49f1-8cd3-0436e8f2f8d2.png)



3. This loads to a blank page



![image](https://user-images.githubusercontent.com/27694443/142912978-e817deaf-1d35-4666-bbac-2066508992ea.png)



This is because the button link URL has an extra slash in it after the `.net//github...`from the config.



Example: `https://sourcegraph-mycompanyurl.net//github.stuff.net/redacted/c1d507efd8963073fcc?utm_source=chrome-extension`



4. To fix, remove the trailing `/` in the Sourcegraph extension configuration. The button then works to load the page.



Example: `https://sourcegraph-mycompanyurl.net`



#### Expected behavior:



Button should load the file diff on the Sourcegraph instance specified in the extension config.



#### Actual behavior:



A blank page is shown.



### Resolution



- Check Extension config for an extra \ at the end and remove
- Fixed in PR https://github.com/sourcegraph/sourcegraph/pull/28058


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4687.md -->
