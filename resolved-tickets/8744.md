​
# New Issue reported by VMware <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8744](https://sourcegraph.zendesk.com/agent/tickets/8744)
- Application engineer: Alex Jean-Baptiste
- Customer: Vmware <!-- Redact if this contains personally identifying information -->
- Date: June 5, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.40.2
- Deployment: Docker Compose
- External Services: GitLab
- Auth Providers: GitLab


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C03DYKCM3PD/p1654306779052459
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/975
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
​
The customer was continuously experiencing cycling in the number of repos they had authorization for. This caused inconsistency in search results as well as Batch Changes. 

### Troubleshooting Steps
​
The customer's database was checked in the following tables:
​
​repo_pending_permissions
​
​repo_permissions
​
​access_tokens
​
### Resolution
​
The customer was instructed to use a non-expiring OAuth token which is still available in GitLab 14.
​
In order to prepare for the customer's update to GitLab 15 in July the issue has been deemed fixed in GitHub issue #37260.
​
​
### Relevant Docs Pages Used/Created
​
https://about.gitlab.com/blog/2022/04/18/gitlab-releases-15-breaking-changes/#optional-enforcement-of-personal-access-token-expiration
​
​
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
​

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8744.md -->
