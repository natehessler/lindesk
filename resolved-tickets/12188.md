
# Repo stuck in "index update in progress" state <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#12188](https://sourcegraph.zendesk.com/agent/tickets/12188)
- Application engineer: Michael Bali
- Customer: kiwi <!-- Redact if this contains personally identifying information -->
- Date: November 28, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.35.1​
- Deployment: kubernetes
- External Services: GITHUB,GITLAB
- Auth Providers: saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C027433JXKN/p1669635666020629
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
We have issues with indexing in some repos (for 1 month in some cases) so we are not getting proper results when doing searches. We are running Version: 3.36.3. I didn't have time to go deeper into it, I've just tried to restart indexed-search pod and it didn't help.

### Troubleshooting Steps
- some repos were failing to sync.
- Requested for logs from the repo-updater and gitserver.
- Grafana chart shows that memory is maxing out.
- Suggested a reclone of the affected repo.
### Resolution
Adding more memory to the gitserver enabled the repo and other affected repos to be indexed.

### Relevant Docs Pages Used/Created

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
```
  gitserver t=2022-11-28T15:49:33+0000 lvl=eror msg="git-service error" error="error running git service command args=[\"-c\" \"uploadpack.allowFilter=true\" \"-c\" \"uploadpack.allowAnySHA1InWant=true\" \"-c\ 
  " \"pack.windowMemory=100m\" \"upload-pack\" \"--stateless-rpc\" \"--strict\" \"/data/repos/gitlab.sxxxxr.com/bi/skyflow_production/.git\"]: signal: killed" stderr=                                         
  gitserver t=2022-11-28T15:49:33+0000 lvl=eror msg=gitservice.ServeHTTP svc=/git-upload-pack repo=<http://gitlab.skyxxxer.com/bi/sxxx_prxxxxn|gitlab.skypicker.com/bi/skyflow_production> protocol="version=2" duration=89.508503ms error="error running git  
  service command args=[\"-c\" \"uploadpack.allowFilter=true\" \"-c\" \"uploadpack.allowAnySHA1InWant=true\" \"-c\" \"pack.windowMemory=100m\" \"upload-pack\" \"--stateless-rpc\" \"--strict\" \"/data/repos/git 
  <http://lab.skypicker.com/bi/skyflow_production/.git\%22]|lab.sxxx.com/bi/skyxxxx/.git\"]>: signal: killed"

```


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 12188.md -->
