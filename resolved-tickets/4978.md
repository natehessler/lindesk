

# atlassian api curl 504 response <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4978](https://sourcegraph.zendesk.com/agent/tickets/4978)

- Application engineer: Warren Gifford

- Customer: Atlassian <!-- Redact if this contains personally identifying information -->

- Date: Dec 9


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.34.2​

- Deployment: kubernetes

- External Services: BITBUCKETCLOUD,BITBUCKETSERVER,GITHUB

- Auth Providers: saml





## Links
<!-- Data for application engineer manual entry -->
- Slack Links:

- GitHub Issue Link:

- Doc Update Link:



## Summary

### Description of Customer Issue
A customer running any curl request to the graphQL API was met with 504 responses



### Troubleshooting Steps
Attempt a trace of the script or add more logging. Ultimately n/a since this turned out to be an error with another part of Sourcegraph and no searches were resolving correctly. 



### Resolution
After the admin upgraded the instance to v3.34.2 the curls began working again.



### Relevant Docs Pages Used/Created
[https://docs.sourcegraph.com/api/graphql](https://docs.sourcegraph.com/api/graphql)



### Relevant Error / Logs

<!-- Please redact keys, tokens, and personal identifying information -->
```bash
curl -i -H 'Authorization: token <insert_token>' -d '{"query":"query($query: String!) { search(query: $query) { results { resultCount } } }","variables":{"query":"Router"}}' https://sourcegraph-frontend.internal.shared-prod.us-west-2.kitt-inf.net/.api/graphql
```




<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4978.md -->
