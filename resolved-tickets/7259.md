
# Get line matches or all unique matches <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7259](https://sourcegraph.zendesk.com/agent/tickets/7259)
- Application engineer: Jason Harris
- Customer: Netflix <!-- Redact if this contains personally identifying information -->
- Date: Mar 30

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.37.0​
- Deployment: pure-docker
- External Services: BITBUCKETSERVER
- Auth Providers: http-header


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://netflix.slack.com/archives/CHKL4G5PG/p1648658801206979
- GitHub Issue Link: n/a
- Doc Update Link: n/a

## Summary
### Customer Question
Netflix is planning to deprecate one of their internal libraries, but in order to do so, they want to extract the components that receive regular use. The request here was to craft a query that would allow them to do so.

### Application Engineer Answer
* Craft a query that searches Netflix's entire codebase for components in this library, without actually searching that particular library.
  * `-repo:astyanax lang:java astyanax.serializers`
* Install `src` cli for the user, to make exporting easier.
* Run query and redirect output to txt file.
  * `src search -stream -- "-repo:astyanax lang:java astyanax.serializers" >> path/to/raw.txt`
* Cat the raw results file and grep "import"
  * `cat raw.txt | grep import`
* Final result:
``` 
103 |  import com.netflix.astyanax.serializers.LongSerializer;
104 |  import com.netflix.astyanax.serializers.ObjectSerializer;
105 |  import com.netflix.astyanax.serializers.PrefixedSerializer;
106 |  import com.netflix.astyanax.serializers.SerializerPackageImpl;
107 |  import com.netflix.astyanax.serializers.StringSerializer;
etc. etc.
```

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/cli

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7259.md -->
