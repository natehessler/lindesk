
# New Slack message in support-snowflake-sourcegraph <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#6285](https://sourcegraph.zendesk.com/agent/tickets/6285)
- Application engineer: Alex Jean-Baptiste
- Customer: Snowflake <!-- Redact if this contains personally identifying information -->
- Date: Feb 16

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.34.1
- Deployment: Docker-compose
- External Services: GitHub
- Auth Providers: built-in, github


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C021MU16S1F/p1645035314888729
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question

Met with the Snowflake Kubernetes team and we have the current action items that we could use some guidance on.

1. Goal is to configure the most minimalistic deployment which still satisfies our needs. Which pods/services might be considered more ‘optional’?
2. We prefer not to use PersistentVolumeClaims, are there any alternative solutions?
3. Is it possible to do a Sourcegraph deployment without having the full prometheus and grafana deployment? We have Wavefront Collector (https://github.com/wavefrontHQ/wavefront-collector-for-kubernetes) as part of the existing infrastructure and prefer to just expose an endpoint to that. What do you recommend here?

### Application Engineer Answer

I have direct answers for Questions 2 & 3.

2. We prefer not to use PersistentVolumeClaims, are there any alternative solutions?
As you look through the YAML files for each of these services you’ll see that PersistentVolumeClaims only exist for the services that involve storage (i.e. databases & minio).This is due to the fact that those services will exist within k8s Pods.You can however run self-managed instances of those storage services as described here.

3. Is it possible to do a Sourcegraph deployment without having the full prometheus and grafana deployment?You may scrape Prometheus alerts into your own monitoring system if it supports Prometheus querying as described here.

In regards to Question 1
Goal is to configure the most minimalistic deployment which still satisfies our needs. Which pods/services might be considered more ‘optional’?

You should be able to run Sourcegraph without the Jaegar service and Grafana. Running Sourcegraph without those services would not be recommended however because it would make it harder to support your instance of Sourcegraph in the future should there be any issues (particularly with networking).

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/external_services
https://docs.sourcegraph.com/admin/faq#can-i-consume-sourcegraph-s-metrics-in-my-own-monitoring-system-datadog-new-relic-etc


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 6285.md -->
