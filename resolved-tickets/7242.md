
# Invalid certificate <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7242](https://sourcegraph.zendesk.com/agent/tickets/7242)
- Application engineer: Giselle Northy
- Customer: The Blackstone Group <!-- Redact if this contains personally identifying information -->
- Date: Mar 29

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: â€‹3.38
- Deployment: Kubernetes
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question

Invalid cert

```
t=2022-04-04T13:39:27+0000 lvl=eror msg="runUpdateLoop: error updating repo" uri=gitlab.blackstone.com/boyetted/sentinel-policies err="error cloning repo: repo gitlab.blackstone.com/boyetted/sentinel-policies not cloneable: exit status 128 (output follows)\n\nfatal: unable to access 'https://gitlab.blackstone.com/boyetted/sentinel-policies.git/': SSL certificate problem: unable to get local issuer certificate"

t=2022-04-04T13:39:27+0000 lvl=eror msg="runUpdateLoop: error updating repo" uri=gitlab.blackstone.com/baam/btrac/services/btpconstituentservice err="error cloning repo: repo gitlab.blackstone.com/baam/btrac/services/btpconstituentservice not cloneable: exit status 128 (output follows)\n\nfatal: unable to access 'https://gitlab.blackstone.com/baam/btrac/services/btpconstituentservice.git/': SSL certificate problem: unable to get local issuer certificate"
```


### Application Engineer Answer

he error looks like the certificate provided isn't valid, but lets double check to rule that out. Can you run the below command to know if this certificate is correct or valid?
curl --cacert /path/to/cert https:<gitlablink
 
Next, if you have verified that the cert is correct, then attempt to clone a repo in the gitserver pod using GIT_SSL_NO_VERIFY=true git clone <repo> . 
What happens when you try that? 

Finally, if that works then, the below can be added to the Global config pane which allows you turn off TLS SSL verification when contacting the code host.
 
```
"experimentalFeatures": {
    "tls.external": {
      "certificates": [
        "-----BEGIN CERTIFICATE-----\n..."
      ],
      "insecureSkipVerify": true
    }
  },
  ```

"Ok.. I got this working once I hacked the gitserver pod and added our certs to /etc/ssl/certs/ca-certificates.crt."



### Relevant Docs Pages Used/Created

