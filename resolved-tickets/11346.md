​
# PlatformScience: Adding Bitbucket Cloud Repos <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#11346](https://sourcegraph.zendesk.com/agent/tickets/11346)
- Application engineer: Alex Jean-Baptiste
- Customer: <!-- Redact if this contains personally identifying information -->
- Date: October 4, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​
- Deployment:
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C03V4326MT6/p1664898912329779?thread_ts=1664898912.329779&cid=C03V4326MT6
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
The customer was unable to clone repos from BitBucket Cloud.
​
### Troubleshooting Steps
Looked at documentation for BitBucket Cloud API and attempted various URL slugs in site configuration.
​
​
### Resolution
​
​I did some testing on my end and I was able to clone repos successfully from BitBucket Cloud to a Sourcegraph instance on v.4.0.1 (The version that you are on).
Our assumptions yesterday on what the team parameter mapped to were incorrect.
After looking at the error message you shared with me yesterday this lead me to look at the BitBucket API.
We can see that the api path for pulling repos is using the following form:
GET /2.0/repositories/{workspace}/{repo_slug}
Where {workspace} is the workspace ID.
I have shared screenshots of my workspace ID on BitBucketCloud as well as the valid code host config in Sourcegraph that allows me to successfully clone the repos belonging to this workspace.
At the present moment Sourcegraph does not clone based on User groups.
However, since a user group should be an item under the hierarchy of a workspace then you should not have any problems getting all the repos that are organized into specific user groups.
Can we try adding the workspace id for the workspace that houses all of those user groups?
I believe that the 401 issue we were seeing might be a red-herring.
In addition, just want to validate that the appPassword generated has read permissions on all the columns on the lefthand side as well.
Should you try all of this and are still receiving the same 401 error please let me know and I’ll escalate this to some teammates.

### Relevant Docs Pages Used/Created
​https://developer.atlassian.com/cloud/bitbucket/rest/api-group-workspaces/#api-group-workspaces
​
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 11346.md -->
