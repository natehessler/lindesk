
# How to enable the offline extension in an air gaped instance <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8743](https://sourcegraph.zendesk.com/agent/tickets/8743)
- Application engineer: Michael Bali
- Customer: KBTG <!-- Redact if this contains personally identifying information -->
- Date: June 5, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​
- Deployment:
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links:
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question
How do I enable the offline extension in an air-gapped instance?

### Application Engineer Answer

In other to use the offline extensions you need to follow the following steps to do this:
- Clone the offline extension repo locally and follow the [instructions](https://github.com/sourcegraph/sourcegraph-extensions-cloning-scripts) outlined in the README file.

- Make this site admin config change `"extensions": { "remoteRegistry": false }`

- The script requires you to set environment variables for `SRC_ENDPOINT` `SRC_ACCESS_TOKEN  `PUBLISHER`

- The `SRC_ENDPOINT` is your instance URL, the `SRC_ACCESS_TOKEN` is the access token created by the user (Extension publisher), and `PUBLISHER` the name of the publisher you want to publish the extension under. More details [here](https://github.com/sourcegraph/sourcegraph-extensions-cloning-scripts/blob/main/to-clone/instructions.md).

- Publish the extension in the private registry using the following command `SRC_ENDPOINT=https://sourcegraph.example.com` `SRC_ACCESS_TOKEN=my-token PUBLISHER=me npm run publish`.

- Run `src extensions list `to be sure your extensions got published.

- In your global settings, add the published extensions like the example below and save.
```
"extensions": {
  "$PUBLISHER/cpp": true,
  "$PUBLISHER/git-extras": true,
  "$PUBLISHER/go": true,
  "$PUBLISHER/swift": true,
  "$PUBLISHER/typescript": true
  }
  ```


- Refresh your browser, click on the extension tab, and head to the `programming language` category and you should see the extensions published.

### Relevant Docs Pages Used/Created
- https://github.com/sourcegraph/sourcegraph-extensions-cloning-scripts/blob/main/to-clone/instructions.md
<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8743.md -->
