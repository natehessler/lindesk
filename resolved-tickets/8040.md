​
# Redis Enablement With Environment Variables <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8040](https://sourcegraph.zendesk.com/agent/tickets/8040)
- Application engineer: Alex Jean-Baptiste
- Customer: Pandora Media, Inc. <!-- Redact if this contains personally identifying information -->
- Date: May 5

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.34
- Deployment: Nomad (Proof of Concept)
- External Services: BitBucket
- Auth Providers: builtin


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02QXK6PKMX/p1651783839932569
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question

​from repo-updater I saw
"t=2022-05-05T20:42:49+0000 lvl=warn msg=\"failed to execute redis command\" cmd=SETEX error=\"dial tcp: lookup redis-cache on 169.254.0.1:53: no such host\""
]

​Do we need an env var to define the cache server?

### Application Engineer Answer
​
Based on your deployment it would seem that you have to follow the instructions here and add those environment variables to the following services:

sourcegraph-frontend
repo-updater
gitserver
searcher
symbols
worker
​
​I realize that you are not using a custom Redis server but the non-traditional deployment of your Sourcegraph instance leads me to believe adding these environment variables is the appropriate next step. Historically we have had to re-define environment variables across your instance.
​
​
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/deploy/kubernetes/configure#configure-custom-redis
​

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8040.md -->
