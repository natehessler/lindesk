​
# Coursera: Errors fetching GitHub repos using a query <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#12222](https://sourcegraph.zendesk.com/agent/tickets/12222)
- Application engineer: Alex Jean-Baptiste
- Customer: Coursera <!-- Redact if this contains personally identifying information -->
- Date: November 30, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​4.1.2
- Deployment: Docker Compose
- External Services: GitHub
- Auth Providers: builtin,github,saml,openidconnec


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C0405S7DGE6/p1669837902415419, https://sourcegraph.slack.com/archives/C03TGHH1S3V/p1669876871133599?thread_ts=1669843763.461379&cid=C03TGHH1S3V
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
​
​We are seeing errors on our instance: 
``` 
6 errors occurred:

fetching from code host GitHub: Error getting GitHub repository: nameWithOwner=webedx-spark/shared-java-application-libraries: do request with refresh and retry: refresh token: no refresh token available 
fetching from code host GitHub: Error getting GitHub repository: nameWithOwner=webedx-spark/infra-services: do request with refresh and retry: refresh token: no refresh token available 
fetching from code host GitHub: Error getting GitHub repository: nameWithOwner=webedx-spark/web: do request with refresh and retry: refresh token: no refresh token available 
fetching from code host GitHub: failed to search GitHub repositories with "org:webedx-spark topic:java-jobs": do request with refresh and retry: refresh token: no refresh token available 
fetching from code host GitHub: failed to search GitHub repositories with "org:webedx-spark topic:java-library": do request with refresh and retry: refresh token: no refresh token available 
fetching from code host GitHub: failed to search GitHub repositories with "org:webedx-spark topic:java-application": do request with refresh and retry: refresh token: no refresh token available 
```

Seems this only occurs for the `repositoryQuery` configs and not the `repos` config.

Also seeing this warning when I tried to update the code hosts config. 
``` 
Warning 
External service updated, but we encountered a problem while validating the external service: error in SyncExternalService for service "GITHUB" with ID 2: context deadline exceeded 
```

### Troubleshooting Steps
Refreshing PAT token.
​
### Resolution
Refreshing expired PAT token. Error message is inaccurate and has been brought to the attention of IAM team.
​
### Relevant Docs Pages Used/Created

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 12222.md -->
