
# New Slack message in support-mercari1 <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7168](https://sourcegraph.zendesk.com/agent/tickets/7168)
- Application engineer: Mariam Adedeji
- Customer: Mercari <!-- Redact if this contains personally identifying information -->
- Date: Mar 24

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.37.0â€‹
- Deployment: kubernetes
- External Services: GITHUB
- Auth Providers: openidconnect


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C018U1ZRFQC/p1648193971962729
- GitHub Issue Link:
- Doc Update Link:

### Customer Question
I'm having some trouble with using the migrator to perform database migrations before upgrading to the latest version.
It seems as though it does not honor the DISABLE_CODE_INSIGHTS environment variable so it always tries to connect even if this is unavailable.

### Application Engineer Answer
it has been noted here that the default -db=all behavior applies to all three databases. So the operation will fail even if the configuration flag DISABLE_CODE_INSIGHTS is set.
To work around this, explicitly supply database(s) via the -db flag (e.g., -db=frontend,codeintel)

### Relevant Docs Pages Used/Created
[Link](https://docs.sourcegraph.com/admin/how-to/manual_database_migrations#:~:text=migrate%20all%20schemas.-,NOTE%3A%20These%20default%20behavior%20applies%20to%20all%20three%20databases.%20If%20the%20configuration%20flag%20DISABLE_CODE_INSIGHTS%20is%20set%20and%20the%20codeinsights%2Ddb%20is%20unavailable%2C%20the%20operation%20will%20fail.%20To%20work%20around%20this%2C%20explicitly%20supply%20database(s)%20via%20the%20%2Ddb%20flag%20(e.g.%2C%20%2Ddb%3Dfrontend%2Ccodeintel).,-upto)
