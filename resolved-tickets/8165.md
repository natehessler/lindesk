
# Batch change remains Open when an archived repo gets stuck <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8165](https://sourcegraph.zendesk.com/agent/tickets/8165)
- Application engineer: Michael Bali
- Customer: Reddit <!-- Redact if this contains personally identifying information -->
- Date: May 11

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.36.2​
- Deployment: kubernetes
- External Services: GITHUB
- Auth Providers: builtin,github


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02BJ8T258D/p1652313342992559
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question
When a batch spec is applied on an archived repo and it gets stuck with the error message `error in GraphQL response: Repository was archived so is read-only and unable to create comment because the issue is locked`, What I want is for the batch change to show the changeset as closed, instead of open, or at least to let me remove it from the batch so it doesn’t stay “stuck” open forever.

### Application Engineer Answer
If the changesets in the batch changes are still Open then there is a likely chance that some of the PR hasnt been merged in the codehost, the status of the changeset would changed from open to merged if the PR has been approved and merged in the codehost. From a test I did on my end, if the changeset for the archived repos are in a failed state and other changesets have been merged. You can go ahead to close the batch change.Further Explanation on the status of a batch change and the changesets it creates. In the Batch changes status we have only 3 filters [ Open, Closed, Merged ]When you click on a Batch change, you see multiple changesets having different status filter [unpublished, Failed, Retrying, Merged, Deleted ... etc ].
It shows the status for each changesets in a batch change. However, when the other changesets are merged and one is failing becaue its for an archived repo, the status of the batch changes would be open. so when you are certain all the changesets are merged. You can now manually close it.

### Relevant Docs Pages Used/Created

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8165.md -->
