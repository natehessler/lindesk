<!-- Title can be a Brief Description of the issue. include keywords that are relevant to make it easily searchable -->

# Batch Changes fail with unrecognized input



- Zendesk Link: [#3917](https://sourcegraph.zendesk.com/agent/tickets/3917)

- CSE: Michael Bali

- Customer: Indeed <!-- Redact if this contains personally identifying information -->


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.30.4​

- Deployment: Kubernetes

- External Services: GITLAB

- Auth Providers: builtin,saml





## Links
<!-- Data for CSE manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C01EDKVG9J5/p1634561041015500

- GitHub Issue Link: N/A

- Doc Update Link: N/A



## Summary

### Description of Customer Issue

The customer got this error ```failed: error: unrecognized input``` when executing Batch Changes.


### Troubleshooting Steps

It seems that the cached file is invalid. When you change the batch change, the cache won't be used.
To investigate why the cached diff fails to apply we'd need to take a look at the contents of one of the files (in the git apply -p0 <filename> command) and know which src-cli version (src version) you use and how old those cache files are (ls -l <filename>).
(You can use -keep-logs to keep the log files around.)
After using -clear-cache the cache files shouldn't exist anymore. 


### Resolution

To fix this, you can run src batch [preview|apply] with the -clear-cache argument. That deletes the cache.

### Relevant Error / Logs

<!-- Please redact keys, tokens, and personal identifying information -->

```failed: error: unrecognized input```


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 3917.md -->
