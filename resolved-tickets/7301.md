
# Re: Requesting gitserver SME help <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7301](https://sourcegraph.zendesk.com/agent/tickets/7301)
- Application engineer: Michael Bali
- Customer: Goldman Sachs <!-- Redact if this contains personally identifying information -->
- Date: Apr 1

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​N/A
- Deployment: N/A
- External Services: N/A
- Auth Providers: N/A


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: email
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
- The Gitserver Pod kept crashing.
- The code intelligent feature doesn't work on Gitlab Native Integration.
- Sourcegraph Prometheus grafana dashboard is not accessible at URL
 
### Troubleshooting Steps
- the logs from the gitserver-4 pod.
- output from describe gitserver.
- Later discovered that code intel does not work on their sourcegraph instance itself because they have an air-gapped deployment which does not allow them to download the programming language extension for search based code intel
- The error you see in the logs is related to missing directories when additional dashboards aren't provided which causes Grafana to be slow or not accessible.
 
### Resolution
- The issue with gitserver has been temporarily remediated by increasing the liveness timeout from 60 seconds to 3600 seconds.
- upgraded sourcegraph to version 3.35 and enabled Gitlab SSO.
- Upon further investigation, for code intelligence, the Sourcegraph Extensions for languages will need to be enabled for the entire organization by the Admin.  To do this, you would need to set up a private registry for the offline extensions.  The Admin would then need to install them and enable them for the entire organization.  Once that is complete then code intelligence will appear for all users.  Users would not have to download anything since the admin would have done that for everyone. 
- This happens to be a [bug](https://github.com/sourcegraph/sourcegraph/issues/29351) that is now fixed in [version 3.36](https://sourcegraph.com/github.com/sourcegraph/sourcegraph@v3.35.1/-/blob/docker-images/grafana/Dockerfile?L40-42). A version upgrade should get this resolved.
Also, a temporary fix you can also implement is to mount an empty directory.

```
- mountPath: /sg_grafana_additional_dashboards
       name: additional-dashboard
- name: additional-dashboard
     emptyDir: {}
```
 
### Relevant Docs Pages Used/Created
N/A
 
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
```
error msg=\""Failed to read content of symlinked path\"" logger=provisioning.dashboard type=file name=sourcegraph_additional path=/sg_grafana_additional_dashboards error=\""lstat /sg_grafana_additional_dashboards: no such file or directory

```


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7301.md -->
