
# Resizing a PersistentVolume used by the GitServer <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9038](https://sourcegraph.zendesk.com/agent/tickets/9038)
- Application engineer: Jason Harris
- Customer: <!-- Redact if this contains personally identifying information -->
- Date: June 15, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.40
- Deployment: Kubernetes
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: n/a
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/1053 
- Doc Update Link: https://github.com/sourcegraph/sourcegraph/issues/37331 

## Summary
### Customer Question
Splunk deployed their Sourcegraph instance via helm, but the PV created used by the GItServer is undersized. They’d like to know the suggested method for resizing it.

### Application Engineer Answer
You should be able to follow the directions in the Kubernetes documentation for volume expansion.

Specifically, you'll need to edit your override file to expand the volumes associated with gitserver:
gitserver:
  storageSize: 200Gi

Apply the change, then wait until the PVC's have been successfully resized:
kubectl get pvc repos-gitserver-0 -o yaml

Look for a FileSystemResizePending status (repeat for each pvc - if you're running multiple replicas of gitserver there will be a pvc for each one). Then, trigger restarts on gitserver:
kubectl rollout restart statefulset/gitserver

The new size should be available on each replica after the restart. This step might not be necessary if you have online expansion enabled but it's harmless / safer to just restart.

### Relevant Docs Pages Used/Created

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 9038.md -->
