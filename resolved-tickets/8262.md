# Booking Question performance hit after upgrade <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#8262](https://sourcegraph.zendesk.com/agent/tickets/8262)
- Application engineer: Quinlan Sparks
- Customer: Booking.com <!-- Redact if this contains personally identifying information -->
- Date: May 17, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.38.1​
- Deployment: kubernetes
- External Services: GITLAB
- Auth Providers: gitlab


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C024D1ESXUH/p1652797463105389
- GitHub Issue Link:
- Doc Update Link:

## Summary
### Customer Question
> we're having some performance issues after we moved from 3.37 to 3.38.The first time I noticed it was this morning, some searches against our large mono-repo being slow, then we got that it was being cloned again, and now we're getting empty resposes and 502s randomly, let me add the pictures in a thread


### Application Engineer Answer
There is a known issue with `sg_maintenance` failing in underprovisioned instances in version 3.38. Between upgrading to 3.39 and adding memory to `gitserver`, the customer saw a significant improvement. They are further tuning their resources in a separate case with Stomzy, and we agreed that this was a good moment for me to bow out, to avoid muddying the waters with too many perspectives in too many threads.

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/how-to/monorepo-issues#common-alerts

https://docs.sourcegraph.com/admin/deploy/kubernetes/scale#improving-performance-with-large-monorepos

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 8262.md -->
