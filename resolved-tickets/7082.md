# docker compose out of date <!-- Ticket Title  Hint: include keywords to make it searchable -->


- Zendesk Link: [#7082](https://sourcegraph.zendesk.com/agent/tickets/7082)
- Application engineer: Jason Harris
- Customer: AppFolio <!-- Redact if this contains personally identifying information -->
- Date: Mar 22

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.38
- Deployment: docker-compose
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02JCB0TM26/p1647966841085519 
- GitHub Issue Link:
- Doc Update Link: https://github.com/sourcegraph/sourcegraph/pull/32959 

## Summary
### Description of Customer Issue
Customer attempting to upgrade from 3.37 to 3.38 was unexpectedly greeted with the following error:

ERROR: The Compose file './docker-compose.yaml' is invalid because:
services.sourcegraph-frontend-internal.depends_on.migrator.condition contains "service_completed_successfully", which is an invalid type, it should be a service_started, or a service_healthy


### Troubleshooting Steps
After asking about all the usual suspects, I sought help in the customer-support-internal channel. Warren informed me that their docker-compose version was out of date, which is why the service_completed_successfully dependency condition wasn't being registered.


### Resolution
Customer upgraded docker-compose to 3.29, this fixed the issue

### Relevant Docs Pages Used/Created
https://github.com/sourcegraph/sourcegraph/pull/32959


### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7082.md -->
