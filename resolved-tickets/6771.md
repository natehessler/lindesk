# Single Docker image syntect-server maxing out CPU <!-- Ticket Title  Hint: include keywords to make it searchable -->
 
- Zendesk Link: [#6771](https://sourcegraph.zendesk.com/agent/tickets/6771)
- Application engineer: Quinlan Sparks
- Customer: TripActions Inc. <!-- Redact if this contains personally identifying information -->
- Date: Mar 10

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->
 
## Technical Environment
- Version: 3.33.0
- Deployment: docker-container
- External Services:
- Auth Providers:
 
 
## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C02RK23KB70/p1646931908950829
- GitHub Issue Link:
- Doc Update Link:
 
## Summary
### Description of Customer Issue
The customer reported an increased amount of I/O timeouts with syntax highlighting, with the server maxing out on CPU thanks to `syntect-server`. They theorized that syntect had 'gone bad' and needed to be restarted, or that they could resolve this by upgrading to `3.7.2`. 
 
### Troubleshooting Steps
The customer's AE made contact with me shortly after I made my initial response to the customer, letting me know that he and their CE wanted to see them switch to either Docker-Compose or Kubernetes, and asked me to suggest that they take this opportunity to entirely re-deploy at the latest version, considering how many versions behind they were. 
 
### Resolution
They were able to resolve the CPU maxing out by restarting their server, but were very open to re-deployment as a better next step when I pointed out that we don't support single Docker in production. They expressed some initial interest in deploying Docker-Compose to Fargate, but that is also an unsupported path, so they anticipate a Kubernetes deployment to their EKS cluster. Their AE has also taken the opportunity to remind them of our managed instances.

Whichever way they decide to go, it falls outside the initial scope of this ticket, which was resolved with the server restart, and should not return with a redeployment.
 
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/deployment_best_practices#sourcegraph-server-single-docker-container
https://docs.sourcegraph.com/admin/install/docker-compose/migrate
https://docs.sourcegraph.com/admin/install/docker-compose/aws
 
### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
 

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 6771.md -->
