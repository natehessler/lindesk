
# HSS worker timeout while serving request <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7184](https://sourcegraph.zendesk.com/agent/tickets/7184)
- Application engineer: Kelvin Lee
- Customer: Tinder <!-- Redact if this contains personally identifying information -->
- Date: Mar 25

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.37.0​
- Deployment: docker-compose
- External Services: GITHUB
- Auth Providers: builtin,saml


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: [Slack](https://sourcegraph.slack.com/archives/C01574FJV35/p1648242066702229) 
- GitHub Issue Link: A separate issue generated [this RFH](https://github.com/sourcegraph/customer/issues/801), but the symptoms are similar and related. A specific issue was also filed for [Dockerfiles and protobuf files](https://github.com/sourcegraph/sourcegraph/issues/33323) .
- Doc Update Link: None

## Summary
### Description of Customer Issue

Seeing `HSS worker timeout` in the UI from `syntect-server`

### Troubleshooting Steps
Honestly... I didn't do much troubleshooting in this ticket. _But_ a decent set of questions of to ask/troubleshooting steps  for this type of issue can include:

- Assuming there's a code-file involved: What is the code file like? Large code files can impact the performance of code-intel. Also, the language of the code file can impact the performance of code-intel as well. The usual suspects are JavaScript, TypeScript, Scala and C#. In This ticket's case, it was a Dockerfile and a .proto file.
- `gitserver` seems to be a viable place to check for logs. And, of course `syntect-server`. 
- There is _some_ merit to checking provisioning /resource allocations/mem+cpu usage of these services, though the discussion generated by the [aforementioned RFH](https://github.com/sourcegraph/customer/issues/801) is that the root of the issue is more likely to be the language of the code files, not a resource allocation to the services. Note that the other related issues tended to end in "resolution" either with a version upgrade, or a resource allocation, though I am suspect to believe that these are just band-aid solutions.

### Resolution
For now, just bumped the resources to `syntect-server` . This is not likely to help, considering that  the [resource estimator](https://docs.sourcegraph.com/admin/install/resource_estimator) doesnt even increase the allocations of syntect-server even with an increase of magnitude of the number of large monorepos, users, and repositories (Though it's possible the estimator is wrong. Hrmm.)

So I'd say: No true resolution. Probably comes down to code-intel covering this ticket's use-cases i.e. code-intel for Dockerfiles, and code-intel for .proto files.

### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/install/resource_estimator 

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
HSS worker timeout

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7184.md -->
