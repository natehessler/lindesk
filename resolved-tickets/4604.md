

# New Slack message in support-upwork-sourcegraph <!-- Ticket Title  Hint: include keywords to make it searchable -->



- Zendesk Link: [#4604](https://sourcegraph.zendesk.com/agent/tickets/4604)

- Application engineer: Giselle Northy

- Customer: Upwork Global Inc. <!-- Redact if this contains personally identifying information -->

- Date: Nov 16


<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->

<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->



## Technical Environment

- Version: 3.33.0​

- Deployment: docker-compose

- External Services: BITBUCKETSERVER

- Auth Providers: builtin,saml





## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C01S5DM6NG7/p1637104137049100

- GitHub Issue Link:

- Doc Update Link:



## Summary

### Customer Question

Esentially there was confusion as to how to do a Regex search, the different kinds of search and what they're useful for.

### Application Engineer Answer

Here are some examples of ways to do it with Regex search I came up with. I also found that if one mouses over the search text, it gives a decent preview of what the search is matching.
 
A) To make it easy to test, I used an example repo on Sourcegraph.com It has 2 repo’s under it, CS372_Networking and programming_by_doing
https://sourcegraph.com/search?q=context:global+repo:%5Egithub%5C.com/northyg/&patternType=literal
search:
`repo:^github\.com/northyg/`
 
B) Then I wanted to omit one of the repo’s under northyg, the programming_by_doing repo.
 
`search: repo:^github\.com/northyg/ -repo:^github\.com/northyg/pro.*`
 
Having the .* after northyg/matches the string pro
Now that repo is excluded from results: https://sourcegraph.com/search?q=context:global+repo:%5Egithub%5C.com/northyg/+-repo:%5Egithub%5C.com/northyg/pro.*&patternType=literal
 
C) To omit file results that start with a string, It’s similar. This returns all files in that repo that have the .java extension.
 
`repo:^github\.com/northyg/programming_by_doing$ file:\.java`
https://sourcegraph.com/search?q=context:global+repo:%5Egithub%5C.com/northyg/programming_by_doing%24+file:%5C.java&patternType=literal
 
Now I’m going to add - in front of file, and `^Alittleto` omit the file, followed by `.*` to leave in results that include other `.javafiles. ALittleQuiz.java`
 
https://sourcegraph.com/search?q=context:global+repo:%5Egithub%5C.com/northyg/programming_by_doing%24+-file:%5EALittle.*%5C.java&patternType=literal
 
`repo:^github\.com/northyg/programming_by_doing$ -file:^ALittle.*\.java`
 
You might find it easier like I did to use file: or repo: to find what I’m looking for first, then just add the dash - in front to omit the results. Also, clicking into one of the files and grabbing the search string that populates made it easier to modify it.

**Regarding the types of searches**, there are three different pattern types: Regex, Literal and Structural.
 
The default type is Literal. You toggle through the different types of searches not by keyword, but instead with the toggles in the UI to the right of the search bar, or by using patterntype:<the_type_here>. Typing the patterntype in is helpful when interacting with the search not through the UI, such as through command line or Graphql API.
 
Pattern types are mutually exclusive, you can only have a certain pattern type per query. So while you can incorporate some regex into other search patterns, it’s not quite the same as toggling to that pattern. Otherwise it will default to literal.

**The different types of searches are useful for different things:**
 
**Structural search**
The intent of it is to be more syntax aware code search. For instance, if you search for append{...} then all your curly braces will align in your search results.
So you can see how that’s effective because the append call has other function calls inside of it. 
 
Regex search would capture the whole line because it uses greedy search or goes to the first ‘right’ parentheses.
 
So in the screen capture example, Structural search is aware of the structures of Go and makes sure that all of the arguments included in the code line of your search show up in the search results.
It’s a more ‘natural’ way of searching, and there are code extensions, and you can use regex in parts of the query. 
 
**Regex search **
Is useful because it matches access lines, which is something that literal search does not do. 
 
You can find more about the use cases here: https://docs.sourcegraph.com/code_search/tutorials/examples#when-to-use-regex-search-mode
 
Search query patterns with some examples. https://docs.sourcegraph.com/code_search/reference/queries



### Relevant Docs Pages Used/Created

Add link to future doc here!


<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 4604.md -->
