 Re: Sourcegraph docker compose <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#9014](https://sourcegraph.zendesk.com/agent/tickets/9014)
- Application engineer: Stomzy Mwendwa
- Customer: Singapore Airlines <!-- Redact if this contains personally identifying information -->
- Date: June 15, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.40
- Deployment: Docker-compose
- External Services: N/A
- Auth Providers: N/A


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: N/A
- GitHub Issue Link: N/A
- Doc Update Link: N/A

## Summary
### Customer Question
Hi,

>> We do store them, Sourcegraph Admins can view them by looking at the event log for a user. 
https://[Your sourcegraph URL].com/users/[user name]/settings/event-log


Any way to retrieve the event directly from file as I would want to upload the event log to cloudwatch log
via cloudwatch agent.

Hi,

The event log for a user login don’t show who SignIn. It just mention SignInSucceeded.
Not that useful in finding out who did what search eg having an audit trail of user activities.
### Application Engineer Answer

Hi Kefta,

As I suspected, we don't have an API for polling event logs and streaming them into CloudWatch. We've noted this product gap and the team is now aware of this.

However, it could be possible to perform a CSV export from Postgres and import into CloudWatch. Just a note that we have policy to delete 93 day old events though. User events can be polled from the event_logs table.

I hope this helps


Hi Kefta,

The web UI currently available allows admins to look at a users actions/pages visited on Sourcegraph at an anonymized level. If you'd be looking at getting specific audit trails for users, then the event_logs table in the database is probably more in line with what you're after. Mainly when you are looking for a particular user’s audit logs (what pages the user has visited, searched, what they have changed, exported, etc.) in Sourcegraph for a particular date range then the best place to check for this would be in the database. You can run the following:
SELECT users.username,event_logs.name,event_logs.url,event_logs.timestamp
FROM event_logs
JOIN users ON event_logs.user_id=users.id
WHERE users.username='$username' AND event_logs.timestamp>='yyyy-mm-dd hh:mm:ss';

Note here that you'll need to specify the username for the user you're investigating. Additionally note that this needs to be run in pgsql. 

I hope this helps.
### Relevant Docs Pages Used/Created
