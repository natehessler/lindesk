
# small group of repos failing to fetch/clone <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7545](https://sourcegraph.zendesk.com/agent/tickets/7545)
- Application engineer: Jason Harris
- Customer: Netflix <!-- Redact if this contains personally identifying information -->
- Date: Apr 8

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: 3.37.0​
- Deployment: pure-docker
- External Services: BITBUCKETSERVER
- Auth Providers: http-header


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C012V43N8E7/p1649437212426909 
- GitHub Issue Link: https://github.com/sourcegraph/customer/issues/824 
- Doc Update Link: N/A

## Summary
### Description of Customer Issue
For a while now, a small number of repos in Netflix instance have been failing to fetch/clone. The customer asked if we could do some more digging on why this is the case. Netflix's logs show the following errors: 
```
clone failed. Output: \nfatal: remote error: upload-pack: not our ref 0000000000000000000000000000000000000000\nfatal: git upload-pack: not our ref 0000000000000000000000000000000000000000: exit status 128
```
The not our ref error is consistent in this issue.

### Troubleshooting Steps
- Tried netflix's internal /refresh/ API. Made no difference.
- Sent the following docs to manually refresh repos: https://docs.sourcegraph.com/admin/how-to/remove-repo. Still failing to fetch/clone.
- I suspected this was related to their unique deployment/bitbucket refs, which is out of my expertise, so I filed an issue with repo management.
- Disabled ref caching on Bitbucket server, then tried the steps in the link above again. No dice.


### Resolution
The customer said this is enough to confirm to him that the problem seems to be related to the data for those particular repos.

"Given the above, I feel confident there is not a lot Sourcegraph can do for those repos, so I'll investigate more on my side). Given that I think you can deprioritize this investigation..."

### Relevant Docs Pages Used/Created
 https://docs.sourcegraph.com/admin/how-to/remove-repo

### Relevant Error / Logs
<!-- Please redact keys, tokens, and personal identifying information -->
```
clone failed. Output: \nfatal: remote error: upload-pack: not our ref 0000000000000000000000000000000000000000\nfatal: git upload-pack: not our ref 0000000000000000000000000000000000000000: exit status 128
```
<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7545.md -->
