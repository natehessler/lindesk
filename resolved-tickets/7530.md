# Using ssh to clone repos on Helm <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#7530](https://sourcegraph.zendesk.com/agent/tickets/7530)
- Application engineer: Gabe Torres
- Customer: Marvell Technology, Inc. <!-- Redact if this contains personally identifying information -->
- Date: Apr 7

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​3.37.0
- Deployment: Helm - Kubernetes
- External Services:
- Auth Providers:

## Summary
### Customer Question
If I use this yaml file to configure the git server. I see in the documentation that I also need to rewrite the override.yaml file. Which command should I re-apply the overrride.yaml file? Will the whole sourcegraph server restart if I re-apply the override.yaml file?

### Application Engineer Answer
You will need to add the gitserver section to your override file. The command to apply the new override to the existing cluster is upgrade with the same options as the install command, you ran previously: so helm upgrade -f override.yaml sg sourcegraph/sourcegraphand the namespace you used.

Only the services changed by the override file should restart, though Helm won't restart the pods if the changes involve secrets. You will need to do a manual restart of gitserver to make sure the container with the secret is running. kubectl rollout restart sts  gitserver

```
gitserver:
 sshSecret: gitserver-ssh
``` 


### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/install/kubernetes/helm#using-ssh-to-clone-repositories  

<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 7530.md -->
