​
# Granular:Using Private Docker Registry For Executors Running Batch Changes <!-- Ticket Title  Hint: include keywords to make it searchable -->

- Zendesk Link: [#10844](https://sourcegraph.zendesk.com/agent/tickets/10844)
- Application engineer: Alex Jean-Baptiste
- Customer: Granular <!-- Redact if this contains personally identifying information -->
- Date: August 31, 2022

<!-- Data populated from integration, speak to Ben Gordon or Michael Bali if not working -->
<!-- During Internal team trial, fill missing data manually (we are waiting for all data to sync) -->

## Technical Environment
- Version: ​
- Deployment:
- External Services:
- Auth Providers:


## Links
<!-- Data for application engineer manual entry -->
- Slack Links: https://sourcegraph.slack.com/archives/C03RQ6EFTE0/p1661972414317939
- GitHub Issue Link: https://github.com/sourcegraph/sourcegraph/issues/40479
- Doc Update Link:

## Summary
### Customer Question
​
​Hello. We are trying to configure the executors to pull from our private Docker registry and we found this issue where it looks like it’s not possible at this time: https://github.com/sourcegraph/sourcegraph/issues/40479.
We also looked at how we can update the user_data script from your Terraform executor module and don’t see a way of doing that either. https://github.com/sourcegraph/terraform-aws-executors/blob/master/modules/executors/main.tf. Pulling from a private Docker registry is a critical piece for getting batch changes to work for us. Looking for your feedback on this.

### Application Engineer Answer
​After consulting with my colleagues we have a discussed a potential workaround for pulling private images.
I want to re-iterate that Sourcegraph completely intends to make pulling of private images a standard feature for executors sooner rather than later. It is a priority of the Batch Changes team roadmap.
For the potential workaround you will edit the following file: https://github.com/sourcegraph/terraform-aws-executors/blob/master/modules/executors/startup-script.sh.tpl
Adding your docker login credentials for the registry containing the private images to your /etc/docker/daemon.json file may allow you to pull private images.
In addition, removing all references to EXECUTORDOCKERREGISTRY_MIRROR would be necessary as well.
This workaround would however expose your credentials to other jobs and is not an ideal security practice.
This workaround is however untested.
​
### Relevant Docs Pages Used/Created
https://docs.sourcegraph.com/admin/executors#how-it-works
<!-- Once complete, upload a copy to https://github.com/sourcegraph/support-tools-internal/tree/main/resolved-tickets as a .md file -->
<!-- Name the file 10844.md -->
