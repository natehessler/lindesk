<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lindesk - Settings</title>
    <link rel="icon" type="image/png" href="/lindesk.png">
    <link rel="alternate icon" href="/lindesk.png">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>
                    <img src="/lindesk.png" alt="Lindesk Logo" class="logo">
                    Lindesk Settings
                </h1>
                <p>Configure your API keys and integration settings</p>
            </div>
        </div>

        <div class="nav">
            <a href="/">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                </svg>
                Back to Main
            </a>
            <button class="theme-toggle" id="themeToggle">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" id="themeIcon">
                    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                </svg>
                <span id="themeText">Light</span>
            </button>
        </div>

        <div class="alert" id="alert"></div>
        <div class="loading" id="loading">Loading configuration...</div>

        <div class="form-container">
            <form id="settingsForm">
                <div class="form-section">
                    <h2>Zendesk Configuration</h2>
                    <div class="form-group">
                        <label for="zendesk_domain">Zendesk Domain</label>
                        <input type="text" id="zendesk_domain" name="zendesk_domain" placeholder="your-company.zendesk.com">
                        <div class="help-text">Your Zendesk subdomain (without https://)</div>
                    </div>
                    <div class="form-group">
                        <label for="zendesk_email">Zendesk Email</label>
                        <input type="email" id="zendesk_email" name="zendesk_email" placeholder="your-email@company.com">
                    </div>
                    <div class="form-group">
                        <label for="zendesk_token">Zendesk API Token</label>
                        <input type="password" id="zendesk_token" name="zendesk_token" placeholder="Enter your Zendesk API token">
                    </div>
                </div>

                <div class="form-section">
                    <h2>Sourcegraph Deep Search Configuration</h2>
                    <div class="form-group">
                        <label for="sourcegraph_url">Sourcegraph URL</label>
                        <input type="url" id="sourcegraph_url" name="sourcegraph_url" placeholder="https://your-sourcegraph-instance.com">
                        <div class="help-text">Your Sourcegraph instance URL (required for Deep Search)</div>
                    </div>
                    <div class="form-group">
                        <label for="sourcegraph_token">Sourcegraph Access Token</label>
                        <input type="password" id="sourcegraph_token" name="sourcegraph_token" placeholder="Enter your Sourcegraph access token">
                        <div class="help-text">Required for AI-powered ticket analysis with Deep Search</div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Slack Integration (Optional)</h2>
                    <div class="form-group">
                        <label for="slack_token">Slack Bot Token</label>
                        <input type="password" id="slack_token" name="slack_token" placeholder="[REDACTED:slack-access-token]">
                        <div class="help-text">Bot token for posting messages to Slack channels</div>
                    </div>
                    <div class="form-group">
                        <label for="default_slack_channel">Default Slack Channel ID</label>
                        <input type="text" id="default_slack_channel" name="default_slack_channel" placeholder="C0123ABC456">
                        <div class="help-text">Default channel to post messages (can be overridden per analysis)</div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Linear Integration (Optional)</h2>
                    <div class="form-group">
                        <label for="linear_api_key">Linear API Key</label>
                        <input type="password" id="linear_api_key" name="linear_api_key" placeholder="Enter your Linear API key">
                    </div>
                    <div class="form-group">
                        <label for="default_linear_project">Default Linear Project</label>
                        <input type="text" id="default_linear_project" name="default_linear_project" placeholder="ENG">
                        <div class="help-text">Default project key for creating Linear issues</div>
                    </div>
                </div>

                <button type="submit" class="btn">Save Configuration</button>
            </form>
        </div>
    </div>

    <script type="module" src="/js/settings.js"></script>
</body>
</html>
